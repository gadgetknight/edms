2025-06-23 18:03:43,417 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,419 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,419 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,420 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,420 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,422 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,422 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,423 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,424 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,425 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,425 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,426 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,427 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,428 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,428 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,429 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,429 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,431 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,431 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,432 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,432 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,433 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,433 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,434 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,434 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,435 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,435 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,436 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,437 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,438 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,438 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,439 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,439 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,440 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,441 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,442 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,442 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,443 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,443 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,444 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,445 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,447 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,448 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,449 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,449 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,450 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,450 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,451 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,452 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,453 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,453 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,454 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,454 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,455 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,456 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,457 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,457 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,458 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,459 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,459 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,461 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,462 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,463 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,464 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,464 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,465 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,465 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,466 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,467 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,468 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,468 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,469 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,469 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,470 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,471 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,472 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,472 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,473 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,473 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,474 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,474 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,476 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,476 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,477 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,478 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,479 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,479 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,480 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,480 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,481 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,482 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,483 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,483 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,484 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,485 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,486 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,486 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,487 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,487 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,488 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,489 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,490 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,490 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,491 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,492 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,493 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,493 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,494 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,494 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,495 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,496 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,497 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,497 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,498 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,499 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,500 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,500 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,501 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,501 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,502 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,502 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,504 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,504 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,505 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,505 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,506 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,506 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,508 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,509 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,511 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,511 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,512 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,512 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,513 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,514 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,515 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,515 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,516 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,516 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,517 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,518 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,519 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,519 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,520 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:43,520 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:43,521 - INFO - UserManagementScreen - user_management_screen:1526 - Loaded 414 charge codes based on filter 'active'.
2025-06-23 18:03:45,175 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 3, new tab title: üóÇÔ∏è Manage Categories/Processes
2025-06-23 18:03:45,175 - INFO - UserManagementScreen - user_management_screen:1216 - Loading charge code categories/processes data...
2025-06-23 18:03:45,178 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:03:45,178 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:03:45,181 - INFO - UserManagementScreen - user_management_screen:1266 - Displayed categories in tree (UI filter: 'active').
2025-06-23 18:04:15,180 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 8, new tab title: üíæ Backup / Restore
2025-06-23 18:04:20,616 - INFO - BackupRestoreTab - backup_restore_tab:175 - Initiating backup creation process.
2025-06-23 18:04:45,034 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Backup In Progress - Creating backup... This may take a moment. The application may become unresponsive.
2025-06-23 18:04:47,319 - INFO - BackupManager - backup_manager:98 - Starting backup to: C:/Users/Admin/Documents/EDMS_Backups\EDMS_Backup_20250623_180447 by user: ADMIN
2025-06-23 18:04:47,324 - INFO - BackupManager - backup_manager:119 - Database dumped successfully to C:/Users/Admin/Documents/EDMS_Backups\EDMS_Backup_20250623_180447\edsi_database_dump.sql
2025-06-23 18:04:47,327 - INFO - BackupManager - backup_manager:143 - Copied directory 'C:/Projects/EDMS/Invoices' to 'C:/Users/Admin/Documents/EDMS_Backups\EDMS_Backup_20250623_180447\invoices'
2025-06-23 18:04:47,329 - INFO - BackupManager - backup_manager:143 - Copied directory 'C:/Projects/EDMS/Statements' to 'C:/Users/Admin/Documents/EDMS_Backups\EDMS_Backup_20250623_180447\statements'
2025-06-23 18:04:47,346 - INFO - BackupManager - backup_manager:143 - Copied directory 'C:/Projects/EDMS/logs' to 'C:/Users/Admin/Documents/EDMS_Backups\EDMS_Backup_20250623_180447\logs'
2025-06-23 18:04:47,347 - INFO - BackupManager - backup_manager:162 - Copied config file 'C:\Users\Admin\AppData\Roaming\EDMS\edms_config.ini' to 'C:/Users/Admin/Documents/EDMS_Backups\EDMS_Backup_20250623_180447\edms_config.ini'
2025-06-23 18:04:47,347 - INFO - BackupManager - backup_manager:174 - Full backup successfully created at: C:/Users/Admin/Documents/EDMS_Backups\EDMS_Backup_20250623_180447
2025-06-23 18:04:47,347 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Backup Successful - Backup created successfully at: C:/Users/Admin/Documents/EDMS_Backups\EDMS_Backup_20250623_180447
2025-06-23 18:04:50,345 - INFO - UserManagementScreen - user_management_screen:1925 - Backup/Restore operation completed with status: backup_success
2025-06-23 18:05:24,450 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 0, new tab title: üë§ Manage Users
2025-06-23 18:05:24,450 - INFO - UserManagementScreen - user_management_screen:634 - Loading users data for tab...
2025-06-23 18:05:24,452 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:05:24,453 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:05:24,453 - INFO - UserManagementScreen - user_management_screen:670 - Loaded 2 users.
2025-06-23 18:05:25,799 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:05:25,800 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:05:28,708 - INFO - UserManagementScreen - base_view:228 - Asking Question: Confirm Delete - Are you sure you want to permanently delete user 'Ted Mazerissi'?
This action cannot be undone.
2025-06-23 18:05:33,038 - INFO - UserController - user_controller:529 - User 'tm' permanently deleted by admin 'ADMIN'.
2025-06-23 18:05:33,038 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:05:33,039 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:05:33,039 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Success - User 'tm' deleted successfully.
2025-06-23 18:05:34,302 - INFO - UserManagementScreen - user_management_screen:634 - Loading users data for tab...
2025-06-23 18:05:34,303 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:05:34,305 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:05:34,305 - INFO - UserManagementScreen - user_management_screen:670 - Loaded 1 users.
2025-06-23 18:05:39,758 - INFO - EDSIApplication - main:348 - User Management Screen was closed and its instance destroyed.
2025-06-23 18:05:45,601 - INFO - HorseUnifiedManagement - horse_unified_management:1656 - handle_logout_request_from_menu: User 'ADMIN' logout.
2025-06-23 18:05:45,601 - INFO - EDSIApplication - main:357 - User 'ADMIN' logging out from Horse Management.
2025-06-23 18:05:45,601 - INFO - EDSIApplication - main:360 - Logout requested. Application will now exit.
2025-06-23 18:05:45,603 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-23 18:05:45,603 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-23 18:05:45,603 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-23 18:05:45,620 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-23 18:05:45,620 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-23 18:05:53,920 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-23 18:05:53,920 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-23 18:05:53,920 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-23 18:05:53,921 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-23 18:05:53,921 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-23 18:05:53,921 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-23 18:05:53,927 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-23 18:05:53,927 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-23 18:05:53,930 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-23 18:05:53,931 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-23 18:05:53,931 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-23 18:05:54,113 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-23 18:05:54,115 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-23 18:05:54,115 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-23 18:05:54,116 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-23 18:05:54,116 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-23 18:05:54,116 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-23 18:05:54,121 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-23 18:05:54,153 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-23 18:05:56,126 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-23 18:06:08,187 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'tm', password_attempt (first 3 chars): '123...'
2025-06-23 18:06:08,189 - WARNING - UserController - user_controller:56 - Login ID 'tm' not found during authentication.
2025-06-23 18:06:08,190 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:08,191 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:09,450 - WARNING - SmallLoginDialog - small_login_dialog:237 - Failed login attempt for user input: tm. Reason: Invalid Login ID or Password.
2025-06-23 18:06:20,993 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-23 18:06:21,156 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-23 18:06:21,156 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:21,157 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:21,157 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-23 18:06:21,157 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-23 18:06:21,168 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-23 18:06:21,169 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-23 18:06:21,169 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-23 18:06:21,170 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-23 18:06:21,171 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-23 18:06:21,172 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-23 18:06:21,178 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-23 18:06:21,338 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-23 18:06:21,341 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-23 18:06:21,342 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-23 18:06:21,346 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-23 18:06:21,352 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-23 18:06:21,352 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-23 18:06:21,355 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:21,355 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:21,358 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:21,359 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:21,363 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:21,363 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:21,370 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 0 results.
2025-06-23 18:06:21,370 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:21,370 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:21,379 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-23 18:06:21,390 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-23 18:06:21,431 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-23 18:06:21,431 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-23 18:06:21,432 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-23 18:06:21,432 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-23 18:06:21,432 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-23 18:06:21,433 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-23 18:06:21,433 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-23 18:06:21,558 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-23 18:06:21,559 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-23 18:06:21,559 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-23 18:06:21,560 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-23 18:06:21,603 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-23 18:06:21,604 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-23 18:06:21,605 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-23 18:06:21,605 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-23 18:06:21,616 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-23 18:06:21,633 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-23 18:06:21,634 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-23 18:06:21,637 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 0 results.
2025-06-23 18:06:21,637 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:21,637 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:21,638 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 0 results.
2025-06-23 18:06:21,638 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:21,639 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:21,639 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-23 18:06:21,639 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-23 18:06:21,640 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-23 18:06:25,140 - INFO - EDSIApplication - main:305 - Setup icon clicked, attempting to show User Management Screen.
2025-06-23 18:06:25,141 - INFO - EDSIApplication - main:331 - Creating new User Management Screen instance.
2025-06-23 18:06:25,142 - INFO - UserManagementScreen - user_management_screen:116 - UserManagementScreen __init__ called for user: ADMIN
2025-06-23 18:06:25,142 - INFO - UserManagementScreen - base_view:75 - BaseView __init__ for UserManagementScreen started.
2025-06-23 18:06:25,142 - INFO - UserManagementScreen - base_view:79 - BaseView __init__ for UserManagementScreen: central_widget created.
2025-06-23 18:06:25,143 - INFO - UserManagementScreen - base_view:84 - BaseView __init__ for UserManagementScreen: Calling overridden setup_ui().
2025-06-23 18:06:25,143 - INFO - UserManagementScreen - user_management_screen:210 - Setting up UserManagementScreen UI...
2025-06-23 18:06:25,200 - INFO - UserManagementScreen - user_management_screen:634 - Loading users data for tab...
2025-06-23 18:06:25,202 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:06:25,203 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:06:25,203 - INFO - UserManagementScreen - user_management_screen:670 - Loaded 1 users.
2025-06-23 18:06:25,203 - INFO - UserManagementScreen - user_management_screen:258 - UserManagementScreen UI setup complete.
2025-06-23 18:06:25,341 - INFO - UserManagementScreen - base_view:182 - Dark theme palette and global styles applied for UserManagementScreen.
2025-06-23 18:06:25,342 - INFO - UserManagementScreen - base_view:115 - BaseView __init__ for UserManagementScreen: Default QStatusBar created and set.
2025-06-23 18:06:25,342 - INFO - UserManagementScreen - base_view:194 - Status update: Ready
2025-06-23 18:06:25,342 - INFO - UserManagementScreen - base_view:120 - BaseView __init__ for UserManagementScreen finished.
2025-06-23 18:06:25,342 - INFO - UserManagementScreen - user_management_screen:207 - UserManagementScreen __init__ completed.
2025-06-23 18:06:25,360 - INFO - EDSIApplication - main:344 - User Management Screen shown.
2025-06-23 18:06:32,299 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 8, new tab title: üíæ Backup / Restore
2025-06-23 18:06:33,894 - INFO - BackupRestoreTab - backup_restore_tab:216 - Initiating restore from backup process.
2025-06-23 18:06:33,894 - WARNING - UserManagementScreen - base_view:220 - Displaying Warning: Confirm Data Restore - WARNING: Restoring from a backup will OVERWRITE ALL CURRENT APPLICATION DATA (database, invoices, statements, logs, and settings).

This action is IRREVERSIBLE. It is highly recommended to create a fresh backup BEFORE proceeding with a restore.

Do you wish to continue?
2025-06-23 18:06:39,477 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Restore In Progress - Restoring data... This may take a moment. The application will restart automatically after completion.
2025-06-23 18:06:40,957 - INFO - BackupManager - backup_manager:208 - Starting restore from: C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447 by user: ADMIN
2025-06-23 18:06:40,957 - INFO - BackupManager - backup_manager:234 - Restoring database from C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\edsi_database_dump.sql to C:/Projects/EDMS/edsi_database.db
2025-06-23 18:06:40,958 - INFO - BackupManager - backup_manager:241 - Removed existing database file: C:/Projects/EDMS/edsi_database.db
2025-06-23 18:06:40,965 - ERROR - BackupManager - backup_manager:261 - Failed to restore database: cannot start a transaction within a transaction
Traceback (most recent call last):
  File "C:\Projects\EDMS\services\backup_manager.py", line 256, in restore_backup
    cursor.executescript(wrapper_script)
sqlite3.OperationalError: cannot start a transaction within a transaction
2025-06-23 18:06:40,966 - ERROR - UserManagementScreen - base_view:224 - Displaying Error: Restore Failed - Failed to restore database: cannot start a transaction within a transaction
2025-06-23 18:06:49,262 - INFO - UserManagementScreen - user_management_screen:1925 - Backup/Restore operation completed with status: restore_failed
2025-06-23 18:10:34,929 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-23 18:10:34,929 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-23 18:10:34,929 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-23 18:10:34,929 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-23 18:10:34,930 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-23 18:10:34,930 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-23 18:10:34,936 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-23 18:10:34,936 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-23 18:10:35,168 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-23 18:10:35,169 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-23 18:10:35,169 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-23 18:10:35,192 - WARNING - DatabaseManager - database_config:214 - Role 'ADMIN' not found. Creating it now. It's recommended to run add_initial_data.py for full role setup.
2025-06-23 18:10:35,194 - INFO - DatabaseManager - database_config:226 - Created 'ADMIN' role.
2025-06-23 18:10:35,195 - INFO - DatabaseManager - database_config:285 - ADMIN user not found. Creating new ADMIN user...
2025-06-23 18:10:35,353 - INFO - DatabaseManager - database_config:297 - Created new ADMIN user with bcrypt password.
2025-06-23 18:10:35,354 - INFO - DatabaseManager - database_config:301 - Linked ADMIN user to ADMIN role.
2025-06-23 18:10:35,358 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-23 18:10:35,358 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-23 18:10:35,358 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-23 18:10:35,358 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-23 18:10:35,359 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-23 18:10:35,364 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-23 18:10:35,390 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-23 18:10:37,192 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-23 18:10:50,941 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-23 18:10:51,101 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-23 18:10:51,101 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:10:51,102 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:10:51,102 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-23 18:10:51,103 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-23 18:10:51,113 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-23 18:10:51,114 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-23 18:10:51,114 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-23 18:10:51,114 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-23 18:10:51,114 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-23 18:10:51,115 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-23 18:10:51,119 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-23 18:10:51,276 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-23 18:10:51,279 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-23 18:10:51,281 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-23 18:10:51,285 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-23 18:10:51,290 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-23 18:10:51,290 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-23 18:10:51,293 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:10:51,293 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:10:51,297 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:10:51,297 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:10:51,301 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:10:51,301 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:10:51,307 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 0 results.
2025-06-23 18:10:51,307 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:10:51,307 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:10:51,316 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-23 18:10:51,326 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-23 18:10:51,367 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-23 18:10:51,368 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-23 18:10:51,368 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-23 18:10:51,368 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-23 18:10:51,369 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-23 18:10:51,369 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-23 18:10:51,369 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-23 18:10:51,494 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-23 18:10:51,495 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-23 18:10:51,496 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-23 18:10:51,496 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-23 18:10:51,544 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-23 18:10:51,545 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-23 18:10:51,545 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-23 18:10:51,546 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-23 18:10:51,555 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-23 18:10:51,574 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-23 18:10:51,575 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-23 18:10:51,578 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 0 results.
2025-06-23 18:10:51,578 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:10:51,578 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:10:51,579 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 0 results.
2025-06-23 18:10:51,580 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:10:51,580 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:10:51,581 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-23 18:10:51,581 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-23 18:10:51,581 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-23 18:10:54,852 - INFO - EDSIApplication - main:305 - Setup icon clicked, attempting to show User Management Screen.
2025-06-23 18:10:54,853 - INFO - EDSIApplication - main:331 - Creating new User Management Screen instance.
2025-06-23 18:10:54,853 - INFO - UserManagementScreen - user_management_screen:116 - UserManagementScreen __init__ called for user: ADMIN
2025-06-23 18:10:54,854 - INFO - UserManagementScreen - base_view:75 - BaseView __init__ for UserManagementScreen started.
2025-06-23 18:10:54,854 - INFO - UserManagementScreen - base_view:79 - BaseView __init__ for UserManagementScreen: central_widget created.
2025-06-23 18:10:54,854 - INFO - UserManagementScreen - base_view:84 - BaseView __init__ for UserManagementScreen: Calling overridden setup_ui().
2025-06-23 18:10:54,855 - INFO - UserManagementScreen - user_management_screen:210 - Setting up UserManagementScreen UI...
2025-06-23 18:10:54,907 - INFO - UserManagementScreen - user_management_screen:634 - Loading users data for tab...
2025-06-23 18:10:54,910 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:10:54,910 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:10:54,910 - INFO - UserManagementScreen - user_management_screen:670 - Loaded 1 users.
2025-06-23 18:10:54,911 - INFO - UserManagementScreen - user_management_screen:258 - UserManagementScreen UI setup complete.
2025-06-23 18:10:55,043 - INFO - UserManagementScreen - base_view:182 - Dark theme palette and global styles applied for UserManagementScreen.
2025-06-23 18:10:55,044 - INFO - UserManagementScreen - base_view:115 - BaseView __init__ for UserManagementScreen: Default QStatusBar created and set.
2025-06-23 18:10:55,044 - INFO - UserManagementScreen - base_view:194 - Status update: Ready
2025-06-23 18:10:55,044 - INFO - UserManagementScreen - base_view:120 - BaseView __init__ for UserManagementScreen finished.
2025-06-23 18:10:55,044 - INFO - UserManagementScreen - user_management_screen:207 - UserManagementScreen __init__ completed.
2025-06-23 18:10:55,060 - INFO - EDSIApplication - main:344 - User Management Screen shown.
2025-06-23 18:11:00,308 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 8, new tab title: üíæ Backup / Restore
2025-06-23 18:11:02,618 - INFO - BackupRestoreTab - backup_restore_tab:216 - Initiating restore from backup process.
2025-06-23 18:11:02,619 - WARNING - UserManagementScreen - base_view:220 - Displaying Warning: Confirm Data Restore - WARNING: Restoring from a backup will OVERWRITE ALL CURRENT APPLICATION DATA (database, invoices, statements, logs, and settings).

This action is IRREVERSIBLE. It is highly recommended to create a fresh backup BEFORE proceeding with a restore.

Do you wish to continue?
2025-06-23 18:11:08,220 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Restore In Progress - Restoring data... This may take a moment. The application will restart automatically after completion.
2025-06-23 18:11:09,783 - INFO - BackupManager - backup_manager:219 - Starting restore from: C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447 by user: ADMIN
2025-06-23 18:11:09,783 - INFO - BackupManager - backup_manager:245 - Restoring database from C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\edsi_database_dump.sql to C:/Projects/EDMS/edsi_database.db
2025-06-23 18:11:09,783 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:11:09,784 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:11:09,784 - INFO - BackupManager - backup_manager:256 - Removed existing database file: C:/Projects/EDMS/edsi_database.db
2025-06-23 18:11:09,798 - INFO - BackupManager - backup_manager:277 - Database restored successfully.
2025-06-23 18:11:09,798 - INFO - BackupManager - backup_manager:296 - Restoring directory 'C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\invoices' to 'C:/Projects/EDMS/Invoices'
2025-06-23 18:11:09,799 - INFO - BackupManager - backup_manager:303 - Removed existing directory 'C:/Projects/EDMS/Invoices' before restore.
2025-06-23 18:11:09,812 - INFO - BackupManager - backup_manager:309 - Restored directory 'C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\invoices' to 'C:/Projects/EDMS/Invoices' successfully.
2025-06-23 18:11:09,813 - INFO - BackupManager - backup_manager:296 - Restoring directory 'C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\statements' to 'C:/Projects/EDMS/Statements'
2025-06-23 18:11:09,813 - INFO - BackupManager - backup_manager:303 - Removed existing directory 'C:/Projects/EDMS/Statements' before restore.
2025-06-23 18:11:09,814 - INFO - BackupManager - backup_manager:309 - Restored directory 'C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\statements' to 'C:/Projects/EDMS/Statements' successfully.
2025-06-23 18:11:09,816 - INFO - BackupManager - backup_manager:296 - Restoring directory 'C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\logs' to 'C:/Projects/EDMS/logs'
2025-06-23 18:11:09,816 - WARNING - BackupManager - backup_manager:313 - Failed to restore directory 'C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\logs': [WinError 32] The process cannot access the file because it is being used by another process: 'C:/Projects/EDMS/logs\\edsi_app.log'
2025-06-23 18:11:09,816 - INFO - BackupManager - backup_manager:326 - Restoring config file from 'C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447\edms_config.ini' to 'C:\Users\Admin\AppData\Roaming\EDMS\edms_config.ini'
2025-06-23 18:11:09,818 - INFO - BackupManager - backup_manager:333 - Configuration file restored successfully.
2025-06-23 18:11:09,818 - INFO - BackupManager - backup_manager:341 - Data restore from C:/Users/Admin/Documents/EDMS_Backups/EDMS_Backup_20250623_180447 completed successfully.
2025-06-23 18:11:09,818 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Restore Successful - Data restored successfully. Please restart the application for changes to take full effect.
2025-06-23 18:11:12,448 - INFO - UserManagementScreen - user_management_screen:1925 - Backup/Restore operation completed with status: restore_success
2025-06-23 18:11:12,448 - INFO - BackupRestoreTab - backup_restore_tab:269 - Restore successful. Initiating application restart.
2025-06-23 18:11:15,160 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-23 18:11:15,162 - INFO - EDSIApplication - main:365 - Main application screen (Horse Management) is closing.
2025-06-23 18:11:15,163 - INFO - EDSIApplication - main:367 - Main screen closed by user; initiating application quit.
2025-06-23 18:11:15,163 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-23 18:11:15,163 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-23 18:11:15,190 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-23 18:11:15,190 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-23 18:11:21,776 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-23 18:11:21,776 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-23 18:11:21,776 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-23 18:11:21,777 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-23 18:11:21,777 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-23 18:11:21,777 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-23 18:11:21,783 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-23 18:11:21,783 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-23 18:11:21,787 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-23 18:11:21,788 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-23 18:11:21,788 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-23 18:11:21,971 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-23 18:11:21,973 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-23 18:11:21,973 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-23 18:11:21,974 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-23 18:11:21,974 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-23 18:11:21,974 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-23 18:11:21,980 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-23 18:11:22,007 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-23 18:11:23,722 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-23 18:11:32,110 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'tm', password_attempt (first 3 chars): '123...'
2025-06-23 18:11:32,273 - INFO - UserController - user_controller:81 - User 'tm' authenticated successfully.
2025-06-23 18:11:32,274 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:11:32,274 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:11:32,274 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'tm' logged in successfully
2025-06-23 18:11:32,275 - INFO - EDSIApplication - main:245 - User 'tm' logged in successfully
2025-06-23 18:11:32,285 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: tm
2025-06-23 18:11:32,286 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: tm
2025-06-23 18:11:32,286 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-23 18:11:32,286 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-23 18:11:32,287 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-23 18:11:32,287 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-23 18:11:32,294 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-23 18:11:32,451 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-23 18:11:32,453 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-23 18:11:32,455 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-23 18:11:32,459 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-23 18:11:32,465 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-23 18:11:32,465 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-23 18:11:32,468 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:11:32,469 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:11:32,472 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:11:32,472 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:11:32,475 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:11:32,476 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:11:32,483 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 0 results.
2025-06-23 18:11:32,483 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:11:32,483 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:11:32,492 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-23 18:11:32,503 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-23 18:11:32,546 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-23 18:11:32,546 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-23 18:11:32,546 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-23 18:11:32,547 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-23 18:11:32,547 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-23 18:11:32,547 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-23 18:11:32,547 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-23 18:11:32,678 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-23 18:11:32,679 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-23 18:11:32,679 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-23 18:11:32,679 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-23 18:11:32,723 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-23 18:11:32,724 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-23 18:11:32,726 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-23 18:11:32,726 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-23 18:11:32,736 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-23 18:11:32,752 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-23 18:11:32,753 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-23 18:11:32,755 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 0 results.
2025-06-23 18:11:32,756 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:11:32,756 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:11:32,757 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 0 results.
2025-06-23 18:11:32,757 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-23 18:11:32,757 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-23 18:11:32,758 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-23 18:11:32,758 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-23 18:11:32,758 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-23 19:58:13,020 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-23 19:58:13,021 - INFO - EDSIApplication - main:365 - Main application screen (Horse Management) is closing.
2025-06-23 19:58:13,021 - INFO - EDSIApplication - main:367 - Main screen closed by user; initiating application quit.
2025-06-23 19:58:13,022 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-23 19:58:13,036 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-23 19:58:13,040 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-23 19:58:13,041 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-24 14:13:37,029 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 14:13:37,029 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 14:13:37,029 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 14:13:37,029 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 14:13:37,030 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 14:13:37,030 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 14:13:37,035 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 14:13:37,035 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 14:13:37,038 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 14:13:37,038 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 14:13:37,039 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 14:13:37,219 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 14:13:37,221 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 14:13:37,221 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 14:13:37,221 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 14:13:37,222 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 14:13:37,222 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 14:13:37,228 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 14:13:37,253 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 14:13:39,526 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 14:13:51,219 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 14:13:51,380 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 14:13:51,380 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:13:51,381 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:13:51,381 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 14:13:51,381 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 14:13:51,389 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 14:13:51,390 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 14:13:51,390 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 14:13:51,390 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 14:13:51,390 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 14:13:51,391 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 14:13:51,395 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 14:13:51,518 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 14:13:51,521 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 14:13:51,523 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 14:13:51,527 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 14:13:51,533 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 14:13:51,533 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 14:13:51,535 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:13:51,536 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:13:51,539 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:13:51,539 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:13:51,543 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:13:51,543 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:13:51,549 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 0 results.
2025-06-24 14:13:51,549 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:13:51,550 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:13:51,558 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 14:13:51,568 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 14:13:51,609 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 14:13:51,609 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 14:13:51,610 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 14:13:51,610 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 14:13:51,611 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 14:13:51,611 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 14:13:51,611 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 14:13:51,732 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 14:13:51,733 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 14:13:51,733 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 14:13:51,734 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 14:13:51,780 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 14:13:51,781 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 14:13:51,781 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 14:13:51,781 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 14:13:51,785 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 14:13:51,808 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 14:13:51,808 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 14:13:51,811 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 0 results.
2025-06-24 14:13:51,811 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:13:51,812 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:13:51,813 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 0 results.
2025-06-24 14:13:51,813 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:13:51,814 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:13:51,815 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 14:13:51,815 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 14:13:51,815 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 14:13:53,602 - INFO - HorseUnifiedManagement - horse_unified_management:1078 - add_new_horse: START
2025-06-24 14:13:53,603 - INFO - BasicInfoTab - basic_info_tab:493 - BasicInfoTab set_new_mode: True
2025-06-24 14:13:53,609 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Enter details for new horse.
2025-06-24 14:13:53,609 - INFO - HorseUnifiedManagement - horse_unified_management:1118 - add_new_horse: FINISHED
2025-06-24 14:14:17,318 - INFO - HorseUnifiedManagement - horse_unified_management:1171 - save_changes: START
2025-06-24 14:14:17,329 - INFO - HorseController - horse_controller:143 - Horse 'Daisy Mae' (ID: 1) created successfully by ADMIN.
2025-06-24 14:14:17,329 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:17,329 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:17,329 - INFO - HorseUnifiedManagement - horse_unified_management:1238 - save_changes: Save successful. Message: Horse 'Daisy Mae' created successfully.
2025-06-24 14:14:17,330 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Success - Horse 'Daisy Mae' created successfully.
2025-06-24 14:14:19,143 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:14:19,143 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:19,144 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:19,144 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 14:14:19,147 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 14:14:19,148 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:19,148 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:19,151 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:14:19,151 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:19,151 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:19,152 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:14:19,154 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:14:19,154 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:19,154 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:19,157 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:19,157 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:19,160 - INFO - FinancialController - financial_controller:472 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:14:19,160 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:19,160 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:19,160 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:14:19,160 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:14:19,161 - INFO - HorseUnifiedManagement - horse_unified_management:1296 - save_changes: FINISHED
2025-06-24 14:14:22,077 - INFO - OwnersTab - owners_tab:377 - Initiating Link Existing Owner for: Daisy Mae
2025-06-24 14:14:22,081 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:22,082 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:24,232 - INFO - LinkExistingOwnerDialog - link_existing_owner_dialog:260 - Owner selected from search: ID 2, Display: Quail Pond Farms (Sarah Davis) [SD001]
2025-06-24 14:14:27,346 - INFO - OwnersTab - owners_tab:399 - Linking owner ID 2 with 100.0% to horse ID 1
2025-06-24 14:14:27,355 - INFO - HorseController - horse_controller:419 - Owner ID 2 added to horse ID 1 by ADMIN.
2025-06-24 14:14:27,356 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:27,356 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:27,356 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Owner Linked - Owner successfully added to horse.
2025-06-24 14:14:29,053 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:29,053 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:29,054 - INFO - HorseUnifiedManagement - horse_unified_management:1137 - _on_owner_association_changed: Owner successfully added to horse.
2025-06-24 14:14:29,054 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Owner successfully added to horse.
2025-06-24 14:14:29,054 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:14:29,057 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:14:29,057 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:29,057 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:29,058 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:29,059 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:29,060 - INFO - FinancialController - financial_controller:472 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:14:29,060 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:29,060 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:29,063 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:29,063 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:29,063 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:14:29,063 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:14:32,821 - INFO - LocationTab - location_tab:271 - Initiating Assign Existing Location for horse: Daisy Mae
2025-06-24 14:14:32,826 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:32,826 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:32,827 - INFO - SelectExistingLocationDialog - select_existing_location_dialog:202 - Loaded 3 active locations initially.
2025-06-24 14:14:33,871 - INFO - SelectExistingLocationDialog - select_existing_location_dialog:247 - Location selected: ID 2, Display: Quarantine Barn (Equineville, PA)
2025-06-24 14:14:35,064 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:35,064 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:35,065 - INFO - LocationTab - location_tab:307 - Attempting to assign Location ID 2 ('Quarantine Barn') to Horse ID 1
2025-06-24 14:14:35,072 - INFO - HorseController - horse_controller:530 - Horse ID 1 assigned to location ID 2 by ADMIN.
2025-06-24 14:14:35,072 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:35,072 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:35,072 - INFO - LocationTab - location_tab:324 - Successfully assigned Location ID 2 to Horse ID 1. Emitting signal.
2025-06-24 14:14:35,072 - INFO - HorseUnifiedManagement - horse_unified_management:918 - Received location_assignment_changed: {'id': 2, 'name': 'Quarantine Barn'}
2025-06-24 14:14:35,073 - INFO - HorseUnifiedManagement - horse_unified_management:921 - Location changed for horse ID 1. Reloading details.
2025-06-24 14:14:35,073 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:14:35,075 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:14:35,075 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:35,075 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:35,077 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:35,077 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:35,078 - INFO - FinancialController - financial_controller:472 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:14:35,078 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:35,079 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:35,080 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:35,080 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:14:35,080 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:14:35,080 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:14:35,081 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Location updated to 'Quarantine Barn' for Daisy Mae.
2025-06-24 14:14:35,081 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Location Assigned - Horse location assigned successfully.
2025-06-24 14:14:45,313 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:14:45,314 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:15:13,929 - INFO - FinancialController - financial_controller:520 - Successfully added 3 charges for horse ID 1.
2025-06-24 14:15:13,929 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:15:13,930 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:15:13,935 - INFO - HorseUnifiedManagement - base_view:194 - Status update: New charges added for Daisy Mae.
2025-06-24 14:15:13,936 - INFO - FinancialController - financial_controller:472 - Retrieved 3 ACTIVE transactions for horse ID 1.
2025-06-24 14:15:13,936 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:15:13,937 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:15:18,084 - INFO - HorseUnifiedManagement - base_view:228 - Asking Question: Confirm Invoice Generation - This will generate 1 separate invoice(s) for all owners of Daisy Mae, splitting a total of $69.00 based on their ownership percentage.

Proceed?
2025-06-24 14:15:24,181 - INFO - FinancialController - financial_controller:237 - --- Starting Invoice Generation for transaction IDs: [1, 2, 3] ---
2025-06-24 14:15:24,188 - INFO - FinancialController - financial_controller:270 - Generating invoices for 1 horse(s).
2025-06-24 14:15:24,197 - INFO - FinancialController - financial_controller:366 - --- Invoice Generation Complete. 1 invoices created. ---
2025-06-24 14:15:24,197 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:15:24,198 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:15:24,198 - INFO - HorseUnifiedManagement - base_view:194 - Status update: 1 invoice(s) created successfully.
2025-06-24 14:15:24,199 - INFO - FinancialController - financial_controller:472 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:15:24,199 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:15:24,200 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:15:24,200 - INFO - HorseUnifiedManagement - horse_unified_management:1662 - Invoice created signal received, refreshing history tab.
2025-06-24 14:15:24,201 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:15:24,202 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:15:31,034 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:15:31,035 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:15:34,902 - INFO - stripe - _util:128 - message='Request to Stripe api' method=get url=https://api.stripe.com/v1/products?limit=1&name=Invoice+%231+Payment
2025-06-24 14:15:35,022 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/products?limit=1&name=Invoice+%231+Payment response_code=401
2025-06-24 14:15:35,023 - INFO - stripe - _util:128 - error_code=None error_message='Invalid API Key provided: sk_test_******************_KEY' error_param=None error_type=invalid_request_error message='Stripe v1 API error received'
2025-06-24 14:15:35,024 - ERROR - FinancialController - financial_controller:156 - Stripe API Error creating payment link for Invoice 1: Invalid API Key provided: sk_test_******************_KEY
Traceback (most recent call last):
  File "C:\Projects\EDMS\controllers\financial_controller.py", line 106, in create_stripe_payment_link
    products = stripe.Product.list(limit=1, name=product_name)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_product.py", line 747, in list
    result = cls._static_request(
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_resource.py", line 172, in _static_request
    return _APIRequestor._global_instance().request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 197, in request
    resp = requestor._interpret_response(rbody, rcode, rheaders, api_mode)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 853, in _interpret_response
    self.handle_error_response(
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 336, in handle_error_response
    raise err
stripe._error.AuthenticationError: Invalid API Key provided: sk_test_******************_KEY
2025-06-24 14:15:35,026 - ERROR - HorseUnifiedManagement - base_view:224 - Displaying Error: Payment Link Generation Failed - Failed to generate payment link: Stripe API Error: Invalid API Key provided: sk_test_******************_KEY
2025-06-24 14:22:15,642 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 14:22:15,642 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 14:22:15,642 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 14:22:15,642 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 14:22:15,643 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 14:22:15,643 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 14:22:15,648 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 14:22:15,648 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 14:22:15,652 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 14:22:15,653 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 14:22:15,653 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 14:22:15,836 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 14:22:15,838 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 14:22:15,838 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 14:22:15,839 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 14:22:15,839 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 14:22:15,839 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 14:22:15,844 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 14:22:15,869 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 14:22:18,131 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 14:22:28,255 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 14:22:28,415 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 14:22:28,416 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,416 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,417 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 14:22:28,417 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 14:22:28,425 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 14:22:28,427 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 14:22:28,428 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 14:22:28,430 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 14:22:28,431 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 14:22:28,432 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 14:22:28,436 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 14:22:28,608 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 14:22:28,611 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 14:22:28,612 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 14:22:28,616 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 14:22:28,621 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 14:22:28,622 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 14:22:28,624 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,624 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,629 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,629 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,633 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,633 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,642 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:22:28,642 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,643 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,651 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 14:22:28,661 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 14:22:28,704 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 14:22:28,704 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 14:22:28,704 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 14:22:28,705 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 14:22:28,705 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 14:22:28,705 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 14:22:28,705 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 14:22:28,835 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 14:22:28,836 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 14:22:28,836 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 14:22:28,836 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 14:22:28,883 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 14:22:28,885 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 14:22:28,885 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 14:22:28,885 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 14:22:28,899 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 14:22:28,917 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 14:22:28,917 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 14:22:28,921 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 14:22:28,921 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,921 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,924 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:22:28,924 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,924 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,925 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:22:28,931 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:22:28,931 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,931 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,934 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,935 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,939 - INFO - FinancialController - financial_controller:472 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:22:28,939 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,939 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,942 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:28,942 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:28,949 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:22:28,949 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:22:28,950 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 14:22:33,727 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:22:33,727 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:22:36,564 - INFO - stripe - _util:128 - message='Request to Stripe api' method=get url=https://api.stripe.com/v1/products?limit=1&name=Invoice+%231+Payment
2025-06-24 14:22:36,815 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/products?limit=1&name=Invoice+%231+Payment response_code=400
2025-06-24 14:22:36,815 - INFO - stripe - _util:128 - error_code=parameter_unknown error_message='Received unknown parameter: name' error_param=name error_type=invalid_request_error message='Stripe v1 API error received'
2025-06-24 14:22:36,817 - ERROR - FinancialController - financial_controller:156 - Stripe API Error creating payment link for Invoice 1: Request req_Z7brLlLclu2QMg: Received unknown parameter: name
Traceback (most recent call last):
  File "C:\Projects\EDMS\controllers\financial_controller.py", line 106, in create_stripe_payment_link
    products = stripe.Product.list(limit=1, name=product_name)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_product.py", line 747, in list
    result = cls._static_request(
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_resource.py", line 172, in _static_request
    return _APIRequestor._global_instance().request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 197, in request
    resp = requestor._interpret_response(rbody, rcode, rheaders, api_mode)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 853, in _interpret_response
    self.handle_error_response(
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 336, in handle_error_response
    raise err
stripe._error.InvalidRequestError: Request req_Z7brLlLclu2QMg: Received unknown parameter: name
2025-06-24 14:22:36,818 - ERROR - HorseUnifiedManagement - base_view:224 - Displaying Error: Payment Link Generation Failed - Failed to generate payment link: Stripe API Error: Received unknown parameter: name
2025-06-24 14:27:50,081 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 14:27:50,081 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 14:27:50,081 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 14:27:50,081 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 14:27:50,081 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 14:27:50,082 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 14:27:50,086 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 14:27:50,086 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 14:27:50,090 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 14:27:50,090 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 14:27:50,090 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 14:27:50,271 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 14:27:50,273 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 14:27:50,273 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 14:27:50,274 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 14:27:50,274 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 14:27:50,274 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 14:27:50,280 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 14:27:50,304 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 14:27:52,280 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 14:28:03,229 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 14:28:03,390 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 14:28:03,391 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,392 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,392 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 14:28:03,392 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 14:28:03,400 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 14:28:03,401 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 14:28:03,401 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 14:28:03,402 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 14:28:03,402 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 14:28:03,402 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 14:28:03,408 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 14:28:03,569 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 14:28:03,572 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 14:28:03,573 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 14:28:03,577 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 14:28:03,583 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 14:28:03,583 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 14:28:03,585 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,586 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,589 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,589 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,593 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,593 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,603 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:28:03,603 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,604 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,612 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 14:28:03,622 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 14:28:03,665 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 14:28:03,666 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 14:28:03,667 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 14:28:03,667 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 14:28:03,667 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 14:28:03,668 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 14:28:03,668 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 14:28:03,795 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 14:28:03,796 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 14:28:03,796 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 14:28:03,796 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 14:28:03,845 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 14:28:03,846 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 14:28:03,846 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 14:28:03,846 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 14:28:03,851 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 14:28:03,874 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 14:28:03,874 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 14:28:03,878 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 14:28:03,879 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,879 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,882 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:28:03,882 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,883 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,883 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:28:03,889 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:28:03,890 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,890 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,893 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,893 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,896 - INFO - FinancialController - financial_controller:536 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:28:03,896 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,896 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,899 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:03,899 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:03,906 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:28:03,906 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:28:03,906 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 14:28:06,915 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:06,916 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:14,039 - INFO - stripe - _util:128 - message='Request to Stripe api' method=get url=https://api.stripe.com/v1/products?limit=100
2025-06-24 14:28:14,290 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/products?limit=100 response_code=200
2025-06-24 14:28:14,291 - INFO - FinancialController - financial_controller:115 - Generic 'Invoice Payment' product not found in Stripe. Creating it.
2025-06-24 14:28:14,292 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/products
2025-06-24 14:28:14,534 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2025-06-24 14:28:14,534 - INFO - FinancialController - financial_controller:129 - Using Stripe Product ID: prod_SYj1Thsdggn2jg for invoice payments.
2025-06-24 14:28:14,535 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/prices
2025-06-24 14:28:14,783 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2025-06-24 14:28:14,784 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_links
2025-06-24 14:28:14,955 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/payment_links response_code=400
2025-06-24 14:28:14,956 - INFO - stripe - _util:128 - error_code=parameter_unknown error_message='Received unknown parameter: customer_email. Did you mean customer_creation?' error_param=customer_email error_type=invalid_request_error message='Stripe v1 API error received'
2025-06-24 14:28:14,957 - ERROR - FinancialController - financial_controller:220 - Stripe API Error creating payment link for Invoice 1: Request req_ofV57zE2jb9izg: Received unknown parameter: customer_email. Did you mean customer_creation?
Traceback (most recent call last):
  File "C:\Projects\EDMS\controllers\financial_controller.py", line 191, in create_stripe_payment_link
    payment_link = stripe.PaymentLink.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_payment_link.py", line 2648, in create
    cls._static_request(
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_resource.py", line 172, in _static_request
    return _APIRequestor._global_instance().request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 197, in request
    resp = requestor._interpret_response(rbody, rcode, rheaders, api_mode)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 853, in _interpret_response
    self.handle_error_response(
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 336, in handle_error_response
    raise err
stripe._error.InvalidRequestError: Request req_ofV57zE2jb9izg: Received unknown parameter: customer_email. Did you mean customer_creation?
2025-06-24 14:28:14,958 - ERROR - HorseUnifiedManagement - base_view:224 - Displaying Error: Payment Link Generation Failed - Failed to generate payment link: Stripe API Error: Received unknown parameter: customer_email. Did you mean customer_creation?
2025-06-24 14:28:32,556 - INFO - OwnersTab - owners_tab:216 - Owner ID 2 selected.
2025-06-24 14:28:32,862 - INFO - OwnersTab - owners_tab:250 - Edit requested for owner ID: 2
2025-06-24 14:28:32,865 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:32,865 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:32,872 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:32,872 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:32,873 - INFO - AddEditOwnerDialog - add_edit_owner_dialog:407 - Loaded 60 states into combobox.
2025-06-24 14:28:32,873 - INFO - AddEditOwnerDialog - add_edit_owner_dialog:422 - Loaded 7 billing terms.
2025-06-24 14:28:54,258 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:54,258 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:54,265 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:54,266 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:54,266 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Success - Owner updated successfully.
2025-06-24 14:28:56,425 - INFO - OwnersTab - owners_tab:261 - Owner ID 2 was updated. Refreshing list.
2025-06-24 14:28:56,425 - INFO - OwnersTab - owners_tab:241 - Owner selection cleared.
2025-06-24 14:28:56,427 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:56,427 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:56,428 - INFO - HorseUnifiedManagement - horse_unified_management:1137 - _on_owner_association_changed: Details updated for owner 'Davis'.
2025-06-24 14:28:56,428 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Details updated for owner 'Davis'.
2025-06-24 14:28:56,428 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:28:56,430 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:28:56,431 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:56,431 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:56,433 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:56,433 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:56,434 - INFO - FinancialController - financial_controller:536 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:28:56,434 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:56,435 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:56,436 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:28:56,436 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:28:56,436 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:28:56,436 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:29:11,507 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 14:29:11,507 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 14:29:11,507 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 14:29:11,507 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 14:29:11,508 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 14:29:11,508 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 14:29:11,512 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 14:29:11,512 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 14:29:11,515 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 14:29:11,516 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 14:29:11,517 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 14:29:11,696 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 14:29:11,699 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 14:29:11,699 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 14:29:11,699 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 14:29:11,699 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 14:29:11,700 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 14:29:11,705 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 14:29:11,730 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 14:29:13,356 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 14:29:22,773 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 14:29:22,934 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 14:29:22,935 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:22,935 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:22,936 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 14:29:22,936 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 14:29:22,944 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 14:29:22,945 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 14:29:22,945 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 14:29:22,946 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 14:29:22,946 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 14:29:22,946 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 14:29:22,952 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 14:29:23,111 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 14:29:23,114 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 14:29:23,116 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 14:29:23,120 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 14:29:23,126 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 14:29:23,126 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 14:29:23,129 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,129 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,132 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,133 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,136 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,137 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,147 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:29:23,147 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,147 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,156 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 14:29:23,166 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 14:29:23,208 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 14:29:23,208 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 14:29:23,209 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 14:29:23,209 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 14:29:23,210 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 14:29:23,210 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 14:29:23,210 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 14:29:23,334 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 14:29:23,335 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 14:29:23,335 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 14:29:23,336 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 14:29:23,385 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 14:29:23,386 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 14:29:23,386 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 14:29:23,386 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 14:29:23,395 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 14:29:23,414 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 14:29:23,415 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 14:29:23,418 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 14:29:23,418 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,419 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,422 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:29:23,422 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,422 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,423 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:29:23,430 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:29:23,430 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,431 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,434 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,434 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,438 - INFO - FinancialController - financial_controller:536 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:29:23,438 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,438 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,441 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:23,442 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:23,449 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:29:23,449 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:29:23,450 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 14:29:27,411 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:29:27,412 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:29:28,915 - INFO - stripe - _util:128 - message='Request to Stripe api' method=get url=https://api.stripe.com/v1/products?limit=100
2025-06-24 14:29:29,202 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/products?limit=100 response_code=200
2025-06-24 14:29:29,204 - INFO - FinancialController - financial_controller:129 - Using Stripe Product ID: prod_SYj1Thsdggn2jg for invoice payments.
2025-06-24 14:29:29,204 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/prices
2025-06-24 14:29:29,454 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2025-06-24 14:29:29,455 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_links
2025-06-24 14:29:29,635 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/payment_links response_code=400
2025-06-24 14:29:29,636 - INFO - stripe - _util:128 - error_code=parameter_unknown error_message='Received unknown parameter: customer_email. Did you mean customer_creation?' error_param=customer_email error_type=invalid_request_error message='Stripe v1 API error received'
2025-06-24 14:29:29,636 - ERROR - FinancialController - financial_controller:220 - Stripe API Error creating payment link for Invoice 1: Request req_l3OQ6EkG6tWQBz: Received unknown parameter: customer_email. Did you mean customer_creation?
Traceback (most recent call last):
  File "C:\Projects\EDMS\controllers\financial_controller.py", line 191, in create_stripe_payment_link
    payment_link = stripe.PaymentLink.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_payment_link.py", line 2648, in create
    cls._static_request(
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_resource.py", line 172, in _static_request
    return _APIRequestor._global_instance().request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 197, in request
    resp = requestor._interpret_response(rbody, rcode, rheaders, api_mode)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 853, in _interpret_response
    self.handle_error_response(
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 336, in handle_error_response
    raise err
stripe._error.InvalidRequestError: Request req_l3OQ6EkG6tWQBz: Received unknown parameter: customer_email. Did you mean customer_creation?
2025-06-24 14:29:29,638 - ERROR - HorseUnifiedManagement - base_view:224 - Displaying Error: Payment Link Generation Failed - Failed to generate payment link: Stripe API Error: Received unknown parameter: customer_email. Did you mean customer_creation?
2025-06-24 14:31:47,141 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 14:31:47,141 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 14:31:47,141 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 14:31:47,142 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 14:31:47,142 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 14:31:47,142 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 14:31:47,146 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 14:31:47,146 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 14:31:47,150 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 14:31:47,150 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 14:31:47,150 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 14:31:47,331 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 14:31:47,333 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 14:31:47,334 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 14:31:47,334 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 14:31:47,334 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 14:31:47,335 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 14:31:47,340 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 14:31:47,371 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 14:31:52,181 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 14:32:02,578 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 14:32:02,742 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 14:32:02,742 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:02,742 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:02,742 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 14:32:02,743 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 14:32:02,751 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 14:32:02,751 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 14:32:02,751 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 14:32:02,752 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 14:32:02,752 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 14:32:02,753 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 14:32:02,760 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 14:32:02,926 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 14:32:02,929 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 14:32:02,930 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 14:32:02,934 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 14:32:02,940 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 14:32:02,940 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 14:32:02,942 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:02,942 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:02,946 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:02,946 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:02,950 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:02,950 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:02,959 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:32:02,959 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:02,959 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:02,968 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 14:32:02,978 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 14:32:03,019 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 14:32:03,020 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 14:32:03,020 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 14:32:03,020 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 14:32:03,021 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 14:32:03,021 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 14:32:03,021 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 14:32:03,146 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 14:32:03,146 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 14:32:03,146 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 14:32:03,147 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 14:32:03,193 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 14:32:03,194 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 14:32:03,194 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 14:32:03,195 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 14:32:03,204 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 14:32:03,226 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 14:32:03,226 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 14:32:03,230 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 14:32:03,231 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:03,231 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:03,234 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:32:03,234 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:03,235 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:03,235 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:32:03,241 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:32:03,242 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:03,242 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:03,246 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:03,246 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:03,250 - INFO - FinancialController - financial_controller:507 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:32:03,250 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:03,250 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:03,253 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:03,254 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:03,259 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:32:03,259 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:32:03,260 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 14:32:10,001 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:32:10,001 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:32:12,736 - INFO - stripe - _util:128 - message='Request to Stripe api' method=get url=https://api.stripe.com/v1/products?limit=100
2025-06-24 14:32:12,851 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/products?limit=100 response_code=401
2025-06-24 14:32:12,852 - INFO - stripe - _util:128 - error_code=None error_message='Invalid API Key provided: sk_test_******************_KEY' error_param=None error_type=invalid_request_error message='Stripe v1 API error received'
2025-06-24 14:32:12,853 - ERROR - FinancialController - financial_controller:109 - Stripe API Error getting/creating generic invoice product: Invalid API Key provided: sk_test_******************_KEY
Traceback (most recent call last):
  File "C:\Projects\EDMS\controllers\financial_controller.py", line 80, in _get_or_create_generic_invoice_product
    products = stripe.Product.list(limit=100)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_product.py", line 747, in list
    result = cls._static_request(
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_resource.py", line 172, in _static_request
    return _APIRequestor._global_instance().request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 197, in request
    resp = requestor._interpret_response(rbody, rcode, rheaders, api_mode)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 853, in _interpret_response
    self.handle_error_response(
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\stripe\_api_requestor.py", line 336, in handle_error_response
    raise err
stripe._error.AuthenticationError: Invalid API Key provided: sk_test_******************_KEY
2025-06-24 14:32:12,855 - ERROR - HorseUnifiedManagement - base_view:224 - Displaying Error: Payment Link Generation Failed - Failed to generate payment link: Failed to get/create generic Stripe invoice product.
2025-06-24 14:34:42,739 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 14:34:42,739 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 14:34:42,739 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 14:34:42,739 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 14:34:42,739 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 14:34:42,740 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 14:34:42,744 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 14:34:42,744 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 14:34:42,747 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 14:34:42,748 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 14:34:42,749 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 14:34:42,931 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 14:34:42,934 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 14:34:42,934 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 14:34:42,934 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 14:34:42,934 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 14:34:42,935 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 14:34:42,940 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 14:34:42,966 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 14:34:44,569 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 14:34:56,014 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 14:34:56,176 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 14:34:56,176 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,177 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,177 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 14:34:56,178 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 14:34:56,186 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 14:34:56,186 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 14:34:56,186 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 14:34:56,186 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 14:34:56,187 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 14:34:56,187 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 14:34:56,194 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 14:34:56,343 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 14:34:56,346 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 14:34:56,347 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 14:34:56,351 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 14:34:56,356 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 14:34:56,357 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 14:34:56,359 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,359 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,363 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,363 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,366 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,367 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,376 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:34:56,376 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,376 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,385 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 14:34:56,395 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 14:34:56,436 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 14:34:56,436 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 14:34:56,437 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 14:34:56,437 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 14:34:56,437 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 14:34:56,438 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 14:34:56,438 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 14:34:56,566 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 14:34:56,567 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 14:34:56,567 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 14:34:56,567 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 14:34:56,614 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 14:34:56,616 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 14:34:56,616 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 14:34:56,616 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 14:34:56,628 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 14:34:56,649 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 14:34:56,650 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 14:34:56,653 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 14:34:56,654 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,654 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,657 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 14:34:56,658 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,658 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,658 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 14:34:56,665 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 14:34:56,665 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,665 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,668 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,669 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,672 - INFO - FinancialController - financial_controller:507 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 14:34:56,672 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,672 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,675 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:34:56,675 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:34:56,681 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 14:34:56,681 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 14:34:56,681 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 14:35:05,741 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:35:05,742 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:35:07,858 - INFO - stripe - _util:128 - message='Request to Stripe api' method=get url=https://api.stripe.com/v1/products?limit=100
2025-06-24 14:35:08,103 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/products?limit=100 response_code=200
2025-06-24 14:35:08,105 - INFO - FinancialController - financial_controller:103 - Using Stripe Product ID: prod_SYj1Thsdggn2jg for invoice payments.
2025-06-24 14:35:08,105 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/prices
2025-06-24 14:35:08,347 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2025-06-24 14:35:08,347 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_links
2025-06-24 14:35:08,801 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/payment_links response_code=200
2025-06-24 14:35:08,801 - INFO - FinancialController - financial_controller:186 - Stripe Payment Link created for Invoice 1: https://buy.stripe.com/test_cNi8wO2T17Uraya1OY3cc00
2025-06-24 14:35:29,907 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 14:36:09,099 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:36:09,099 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:36:09,102 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:36:09,103 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:36:09,104 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:36:09,104 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:36:09,104 - ERROR - HorseUnifiedManagement - base_view:224 - Displaying Error: PDF Error - Failed to generate PDF for INV-1:
Company Profile is not set up.
2025-06-24 14:36:14,886 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 14:37:58,961 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/prices
2025-06-24 14:37:59,289 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2025-06-24 14:37:59,290 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_links
2025-06-24 14:37:59,782 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/payment_links response_code=200
2025-06-24 14:37:59,783 - INFO - FinancialController - financial_controller:186 - Stripe Payment Link created for Invoice 1: https://buy.stripe.com/test_14A00i1OXcaH21E3X63cc01
2025-06-24 14:38:02,508 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 14:43:26,221 - INFO - EDSIApplication - main:305 - Setup icon clicked, attempting to show User Management Screen.
2025-06-24 14:43:26,221 - INFO - EDSIApplication - main:331 - Creating new User Management Screen instance.
2025-06-24 14:43:26,222 - INFO - UserManagementScreen - user_management_screen:116 - UserManagementScreen __init__ called for user: ADMIN
2025-06-24 14:43:26,223 - INFO - UserManagementScreen - base_view:75 - BaseView __init__ for UserManagementScreen started.
2025-06-24 14:43:26,223 - INFO - UserManagementScreen - base_view:79 - BaseView __init__ for UserManagementScreen: central_widget created.
2025-06-24 14:43:26,223 - INFO - UserManagementScreen - base_view:84 - BaseView __init__ for UserManagementScreen: Calling overridden setup_ui().
2025-06-24 14:43:26,223 - INFO - UserManagementScreen - user_management_screen:210 - Setting up UserManagementScreen UI...
2025-06-24 14:43:26,277 - INFO - UserManagementScreen - user_management_screen:634 - Loading users data for tab...
2025-06-24 14:43:26,281 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:43:26,281 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:43:26,281 - INFO - UserManagementScreen - user_management_screen:670 - Loaded 2 users.
2025-06-24 14:43:26,281 - INFO - UserManagementScreen - user_management_screen:258 - UserManagementScreen UI setup complete.
2025-06-24 14:43:26,426 - INFO - UserManagementScreen - base_view:182 - Dark theme palette and global styles applied for UserManagementScreen.
2025-06-24 14:43:26,426 - INFO - UserManagementScreen - base_view:115 - BaseView __init__ for UserManagementScreen: Default QStatusBar created and set.
2025-06-24 14:43:26,427 - INFO - UserManagementScreen - base_view:194 - Status update: Ready
2025-06-24 14:43:26,427 - INFO - UserManagementScreen - base_view:120 - BaseView __init__ for UserManagementScreen finished.
2025-06-24 14:43:26,427 - INFO - UserManagementScreen - user_management_screen:207 - UserManagementScreen __init__ completed.
2025-06-24 14:43:26,444 - INFO - EDSIApplication - main:344 - User Management Screen shown.
2025-06-24 14:43:36,502 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 8, new tab title: üíæ Backup / Restore
2025-06-24 14:43:38,131 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 7, new tab title: üìÅ Application Paths
2025-06-24 14:43:39,739 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 6, new tab title: üè¢ Company Profile
2025-06-24 14:43:41,709 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:43:41,709 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:46:42,424 - INFO - CompanyProfileController - company_profile_controller:52 - No existing company profile found. Creating new one.
2025-06-24 14:46:42,430 - INFO - CompanyProfileController - company_profile_controller:62 - Company profile updated by ADMIN.
2025-06-24 14:46:42,431 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:46:42,431 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:46:44,501 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Success - Company profile has been updated.
2025-06-24 14:46:50,123 - INFO - EDSIApplication - main:348 - User Management Screen was closed and its instance destroyed.
2025-06-24 14:49:13,347 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/prices
2025-06-24 14:49:13,668 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2025-06-24 14:49:13,670 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_links
2025-06-24 14:49:14,111 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/payment_links response_code=200
2025-06-24 14:49:14,112 - INFO - FinancialController - financial_controller:186 - Stripe Payment Link created for Invoice 1: https://buy.stripe.com/test_9B600i0KTeiPaya65e3cc02
2025-06-24 14:49:27,069 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 14:52:04,546 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:52:04,547 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:52:04,549 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:52:04,549 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:52:04,550 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:52:04,551 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:52:04,552 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:52:04,552 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:52:04,560 - INFO - InvoiceGenerator - invoice_generator:149 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 14:52:04,575 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 14:52:24,820 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:52:24,820 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:52:24,821 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:52:24,822 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:52:24,823 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:52:24,823 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:52:24,827 - INFO - InvoiceGenerator - invoice_generator:149 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices/Invoice-1.pdf
2025-06-24 14:52:24,827 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Success - Invoice successfully saved to:
C:/Projects/EDMS/Invoices/Invoice-1.pdf
2025-06-24 14:54:12,069 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/prices
2025-06-24 14:54:12,405 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2025-06-24 14:54:12,405 - INFO - stripe - _util:128 - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_links
2025-06-24 14:54:12,828 - INFO - stripe - _util:128 - message='Stripe API response' path=https://api.stripe.com/v1/payment_links response_code=200
2025-06-24 14:54:12,829 - INFO - FinancialController - financial_controller:186 - Stripe Payment Link created for Invoice 1: https://buy.stripe.com/test_5kQ6oGfFNdeL0XA65e3cc03
2025-06-24 14:57:31,436 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 14:57:33,495 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:57:33,497 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:57:33,499 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:57:33,500 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:57:33,501 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:57:33,501 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:57:33,502 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 14:57:33,503 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 14:57:33,507 - INFO - InvoiceGenerator - invoice_generator:149 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 14:57:33,516 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 15:14:17,654 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 15:14:17,654 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 15:14:17,654 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 15:14:17,654 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 15:14:17,654 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 15:14:17,654 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 15:14:17,660 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 15:14:17,660 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 15:14:17,663 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 15:14:17,664 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 15:14:17,664 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 15:14:17,844 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 15:14:17,846 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 15:14:17,847 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 15:14:17,847 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 15:14:17,847 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 15:14:17,847 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 15:14:17,852 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 15:14:17,881 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 17:45:18,487 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 17:45:18,488 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 17:45:18,488 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 17:45:18,488 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 17:45:18,488 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 17:45:18,488 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 17:45:18,492 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 17:45:18,494 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 17:45:18,496 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 17:45:18,497 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 17:45:18,497 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 17:45:18,677 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 17:45:18,679 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 17:45:18,680 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 17:45:18,680 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 17:45:18,680 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 17:45:18,681 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 17:45:18,686 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 17:45:18,714 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 17:45:20,687 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 17:45:30,515 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 17:45:30,675 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 17:45:30,676 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:30,677 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:30,677 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 17:45:30,677 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 17:45:30,688 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 17:45:30,689 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 17:45:30,689 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 17:45:30,689 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 17:45:30,690 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 17:45:30,690 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 17:45:30,699 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 17:45:30,858 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 17:45:30,863 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 17:45:30,865 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 17:45:30,869 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 17:45:30,874 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 17:45:30,874 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 17:45:30,877 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:30,877 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:30,881 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:30,881 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:30,885 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:30,886 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:30,895 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 17:45:30,895 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:30,896 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:30,904 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 17:45:30,915 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 17:45:30,956 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 17:45:30,957 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 17:45:30,957 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 17:45:30,958 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 17:45:30,958 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 17:45:30,958 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 17:45:30,958 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 17:45:31,088 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 17:45:31,089 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 17:45:31,090 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 17:45:31,090 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 17:45:31,136 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 17:45:31,138 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 17:45:31,138 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 17:45:31,138 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 17:45:31,148 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 17:45:31,168 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 17:45:31,169 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 17:45:31,172 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 17:45:31,173 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:31,173 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:31,176 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 17:45:31,176 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:31,176 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:31,177 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 17:45:31,183 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 17:45:31,183 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:31,184 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:31,187 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:31,187 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:31,190 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 17:45:31,190 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:31,191 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:31,193 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:31,193 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:31,200 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 17:45:31,200 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 17:45:31,200 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 17:45:38,809 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:45:38,809 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:45:47,759 - CRITICAL - GlobalExceptionHook - main:74 - Unhandled exception: TypeError: FinancialController.create_stripe_payment_link() missing 2 required positional arguments: 'doctor_stripe_secret_key' and 'doctor_identifier'
Traceback (most recent call last):
  File "C:\Projects\EDMS\views\horse\tabs\invoice_history_tab.py", line 431, in _generate_payment_link
    self.financial_controller.create_stripe_payment_link(
TypeError: FinancialController.create_stripe_payment_link() missing 2 required positional arguments: 'doctor_stripe_secret_key' and 'doctor_identifier'
Traceback (most recent call last):
  File "C:\Projects\EDMS\views\horse\tabs\invoice_history_tab.py", line 431, in _generate_payment_link
    self.financial_controller.create_stripe_payment_link(
TypeError: FinancialController.create_stripe_payment_link() missing 2 required positional arguments: 'doctor_stripe_secret_key' and 'doctor_identifier'
2025-06-24 17:56:20,679 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 17:56:20,680 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 17:56:20,680 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 17:56:20,680 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 17:56:20,680 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 17:56:20,680 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 17:56:20,685 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 17:56:20,685 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 17:56:20,688 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 17:56:20,689 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 17:56:20,690 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 17:56:20,869 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 17:56:20,871 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 17:56:20,871 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 17:56:20,871 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 17:56:20,872 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 17:56:20,872 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 17:56:20,877 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 17:56:20,905 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 17:56:36,249 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 17:56:46,570 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 17:56:46,730 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 17:56:46,731 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:46,732 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:46,732 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 17:56:46,732 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 17:56:46,739 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 17:56:46,739 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 17:56:46,740 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 17:56:46,740 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 17:56:46,740 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 17:56:46,741 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 17:56:46,745 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 17:56:46,897 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 17:56:46,900 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 17:56:46,901 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 17:56:46,905 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 17:56:46,911 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 17:56:46,912 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 17:56:46,914 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:46,914 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:46,918 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:46,918 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:46,921 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:46,922 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:46,931 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 17:56:46,931 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:46,932 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:46,940 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 17:56:46,950 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 17:56:46,992 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 17:56:46,992 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 17:56:46,993 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 17:56:46,993 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 17:56:46,993 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 17:56:46,993 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 17:56:46,993 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 17:56:47,116 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 17:56:47,117 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 17:56:47,117 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 17:56:47,117 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 17:56:47,165 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 17:56:47,168 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 17:56:47,168 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 17:56:47,168 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 17:56:47,177 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 17:56:47,197 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 17:56:47,198 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 17:56:47,202 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 17:56:47,202 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:47,202 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:47,205 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 17:56:47,205 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:47,206 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:47,206 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 17:56:47,212 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 17:56:47,213 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:47,213 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:47,216 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:47,216 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:47,219 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 17:56:47,220 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:47,220 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:47,222 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:47,222 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:47,228 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 17:56:47,228 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 17:56:47,229 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 17:56:51,453 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 17:56:51,454 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 17:56:59,949 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_9B69AS5198YvcGibpy3cc04
2025-06-24 17:57:07,058 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 18:24:29,574 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 18:24:29,574 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 18:24:29,574 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 18:24:29,576 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 18:24:29,576 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 18:24:29,576 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 18:24:29,581 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 18:24:29,581 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 18:24:29,584 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 18:24:29,585 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 18:24:29,585 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 18:24:29,767 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 18:24:29,769 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 18:24:29,769 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 18:24:29,770 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 18:24:29,770 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 18:24:29,770 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 18:24:29,775 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 18:24:29,803 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 18:24:32,262 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 18:24:42,041 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 18:24:42,203 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 18:24:42,203 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,204 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,204 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 18:24:42,204 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 18:24:42,216 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 18:24:42,216 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 18:24:42,217 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 18:24:42,217 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 18:24:42,217 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 18:24:42,218 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 18:24:42,222 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 18:24:42,379 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 18:24:42,383 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 18:24:42,384 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 18:24:42,388 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 18:24:42,393 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 18:24:42,393 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 18:24:42,396 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,396 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,399 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,399 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,403 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,403 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,412 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 18:24:42,413 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,413 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,421 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 18:24:42,432 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 18:24:42,475 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 18:24:42,475 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 18:24:42,476 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 18:24:42,476 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 18:24:42,477 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 18:24:42,477 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 18:24:42,477 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 18:24:42,603 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 18:24:42,604 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 18:24:42,604 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 18:24:42,604 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 18:24:42,652 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 18:24:42,653 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 18:24:42,653 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 18:24:42,653 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 18:24:42,671 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 18:24:42,697 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 18:24:42,697 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 18:24:42,702 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 18:24:42,702 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,702 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,705 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 18:24:42,706 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,706 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,706 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 18:24:42,712 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 18:24:42,712 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,713 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,716 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,717 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,720 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 18:24:42,720 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,720 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,723 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:42,724 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:42,730 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 18:24:42,730 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 18:24:42,730 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 18:24:47,561 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:24:47,561 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:24:49,995 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_28EfZg519a2zfSu8dm3cc05
2025-06-24 18:24:53,366 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 18:28:41,904 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 18:28:41,904 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 18:28:41,904 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 18:28:41,905 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 18:28:41,906 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 18:28:41,906 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 18:28:41,911 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 18:28:41,911 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 18:28:41,914 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 18:28:41,915 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 18:28:41,915 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 18:28:42,101 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 18:28:42,103 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 18:28:42,104 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 18:28:42,104 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 18:28:42,104 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 18:28:42,104 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 18:28:42,109 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 18:28:42,152 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 18:28:44,643 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 18:28:55,193 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 18:28:55,357 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 18:28:55,357 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,358 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,358 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 18:28:55,358 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 18:28:55,367 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 18:28:55,367 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 18:28:55,367 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 18:28:55,368 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 18:28:55,369 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 18:28:55,369 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 18:28:55,376 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 18:28:55,533 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 18:28:55,537 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 18:28:55,539 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 18:28:55,543 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 18:28:55,549 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 18:28:55,549 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 18:28:55,552 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,552 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,556 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,556 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,560 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,560 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,570 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 18:28:55,570 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,570 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,578 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 18:28:55,589 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 18:28:55,631 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 18:28:55,632 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 18:28:55,632 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 18:28:55,633 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 18:28:55,633 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 18:28:55,633 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 18:28:55,633 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 18:28:55,759 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 18:28:55,760 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 18:28:55,760 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 18:28:55,760 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 18:28:55,816 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 18:28:55,818 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 18:28:55,818 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 18:28:55,818 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 18:28:55,826 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 18:28:55,844 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 18:28:55,845 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 18:28:55,848 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 18:28:55,849 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,849 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,852 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 18:28:55,852 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,852 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,853 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 18:28:55,860 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 18:28:55,860 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,860 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,863 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,864 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,867 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 18:28:55,868 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,868 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,871 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:28:55,871 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:28:55,877 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 18:28:55,877 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 18:28:55,877 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 18:29:00,221 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:29:00,221 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:29:02,468 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_9B6bJ08dl5Mj6hU79i3cc06
2025-06-24 18:29:04,654 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 18:34:58,146 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_cNi8wO2T12A7ayactC3cc07
2025-06-24 18:35:03,289 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 18:41:32,932 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 18:41:32,932 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 18:41:32,932 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 18:41:32,932 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 18:41:32,933 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 18:41:32,933 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 18:41:32,937 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 18:41:32,937 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 18:41:32,940 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 18:41:32,941 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 18:41:32,941 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 18:41:33,125 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 18:41:33,126 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 18:41:33,127 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 18:41:33,127 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 18:41:33,127 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 18:41:33,128 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 18:41:33,132 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 18:41:33,161 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 18:41:34,964 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 18:41:53,716 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 18:41:53,878 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 18:41:53,879 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:53,880 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:53,880 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 18:41:53,880 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 18:41:53,888 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 18:41:53,888 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 18:41:53,889 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 18:41:53,889 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 18:41:53,889 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 18:41:53,890 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 18:41:53,895 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 18:41:54,053 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 18:41:54,056 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 18:41:54,058 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 18:41:54,062 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 18:41:54,067 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 18:41:54,068 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 18:41:54,070 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,071 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,074 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,074 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,079 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,079 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,089 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 18:41:54,089 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,089 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,097 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 18:41:54,109 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 18:41:54,152 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 18:41:54,152 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 18:41:54,152 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 18:41:54,153 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 18:41:54,153 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 18:41:54,153 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 18:41:54,153 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 18:41:54,281 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 18:41:54,282 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 18:41:54,282 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 18:41:54,282 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 18:41:54,334 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 18:41:54,336 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 18:41:54,336 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 18:41:54,336 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 18:41:54,344 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 18:41:54,364 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 18:41:54,364 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 18:41:54,368 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 18:41:54,368 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,369 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,372 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 18:41:54,372 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,372 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,373 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 18:41:54,380 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 18:41:54,380 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,380 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,384 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,384 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,387 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 18:41:54,388 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,388 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,391 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:54,391 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:54,397 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 18:41:54,397 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 18:41:54,397 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 18:41:57,146 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:41:57,147 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:41:59,192 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_dRm5kCbpx1w36hU51a3cc08
2025-06-24 18:42:01,313 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 18:45:27,147 - INFO - HorseUnifiedManagement - horse_unified_management:1656 - handle_logout_request_from_menu: User 'ADMIN' logout.
2025-06-24 18:45:27,148 - INFO - EDSIApplication - main:357 - User 'ADMIN' logging out from Horse Management.
2025-06-24 18:45:27,149 - INFO - EDSIApplication - main:360 - Logout requested. Application will now exit.
2025-06-24 18:45:27,149 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-24 18:45:27,149 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-24 18:45:27,149 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-24 18:45:27,161 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-24 18:45:27,162 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-24 18:45:44,010 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 18:45:44,010 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 18:45:44,011 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 18:45:44,011 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 18:45:44,011 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 18:45:44,011 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 18:45:44,016 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 18:45:44,016 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 18:45:44,019 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 18:45:44,020 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 18:45:44,020 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 18:45:44,203 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 18:45:44,205 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 18:45:44,205 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 18:45:44,205 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 18:45:44,205 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 18:45:44,206 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 18:45:44,211 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 18:45:44,240 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 18:45:46,158 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 18:45:55,571 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 18:45:55,732 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 18:45:55,732 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:55,733 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:55,733 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 18:45:55,734 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 18:45:55,741 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 18:45:55,747 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 18:45:55,747 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 18:45:55,747 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 18:45:55,748 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 18:45:55,748 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 18:45:55,752 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 18:45:55,927 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 18:45:55,930 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 18:45:55,931 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 18:45:55,936 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 18:45:55,942 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 18:45:55,943 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 18:45:55,945 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:55,946 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:55,949 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:55,949 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:55,953 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:55,953 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:55,963 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 18:45:55,963 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:55,963 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:55,972 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 18:45:55,983 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 18:45:56,024 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 18:45:56,025 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 18:45:56,025 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 18:45:56,025 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 18:45:56,026 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 18:45:56,026 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 18:45:56,026 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 18:45:56,154 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 18:45:56,154 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 18:45:56,154 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 18:45:56,155 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 18:45:56,203 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 18:45:56,204 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 18:45:56,205 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 18:45:56,205 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 18:45:56,209 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 18:45:56,232 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 18:45:56,233 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 18:45:56,236 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 18:45:56,237 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:56,237 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:56,240 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 18:45:56,240 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:56,241 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:56,241 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 18:45:56,248 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 18:45:56,248 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:56,248 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:56,252 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:56,252 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:56,255 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 18:45:56,256 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:56,256 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:56,258 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:45:56,258 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:45:56,265 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 18:45:56,265 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 18:45:56,265 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 18:46:00,713 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 18:46:00,713 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 18:46:03,279 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_8x2bJ03X5b6DdKm79i3cc09
2025-06-24 18:46:05,175 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 19:10:06,381 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 19:10:06,382 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 19:10:06,382 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 19:10:06,382 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 19:10:06,382 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 19:10:06,382 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 19:10:06,388 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 19:10:06,388 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 19:10:06,392 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 19:10:06,392 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 19:10:06,392 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 19:10:06,570 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 19:10:06,572 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 19:10:06,572 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 19:10:06,572 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 19:10:06,573 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 19:10:06,573 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 19:10:06,578 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 19:10:06,608 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 19:10:08,386 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 19:10:18,836 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 19:10:18,997 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 19:10:18,998 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:18,999 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:18,999 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 19:10:18,999 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 19:10:19,007 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 19:10:19,007 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 19:10:19,008 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 19:10:19,008 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 19:10:19,008 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 19:10:19,009 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 19:10:19,015 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 19:10:19,173 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 19:10:19,176 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 19:10:19,177 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 19:10:19,181 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 19:10:19,187 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 19:10:19,188 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 19:10:19,191 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,192 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,195 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,195 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,199 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,199 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,209 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 19:10:19,209 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,209 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,218 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 19:10:19,228 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 19:10:19,271 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 19:10:19,272 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 19:10:19,272 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 19:10:19,272 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 19:10:19,273 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 19:10:19,273 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 19:10:19,273 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 19:10:19,403 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 19:10:19,403 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 19:10:19,403 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 19:10:19,404 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 19:10:19,451 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 19:10:19,452 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 19:10:19,452 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 19:10:19,453 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 19:10:19,459 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 19:10:19,482 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 19:10:19,482 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 19:10:19,486 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 19:10:19,486 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,486 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,489 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 19:10:19,490 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,490 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,491 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 19:10:19,497 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 19:10:19,497 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,498 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,501 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,501 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,504 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 19:10:19,505 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,505 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,508 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:19,508 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:19,514 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 19:10:19,514 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 19:10:19,514 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 19:10:24,046 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:10:24,046 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:10:28,705 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_bJeeVc2T14If21EctC3cc0a
2025-06-24 19:10:30,620 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 19:11:50,027 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-24 19:11:50,028 - INFO - EDSIApplication - main:365 - Main application screen (Horse Management) is closing.
2025-06-24 19:11:50,029 - INFO - EDSIApplication - main:367 - Main screen closed by user; initiating application quit.
2025-06-24 19:11:50,029 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-24 19:11:50,040 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-24 19:11:50,044 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-24 19:11:50,045 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-24 19:15:28,816 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 19:15:28,816 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 19:15:28,817 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 19:15:28,817 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 19:15:28,817 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 19:15:28,818 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 19:15:28,823 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 19:15:28,823 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 19:15:28,826 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 19:15:28,827 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 19:15:28,827 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 19:15:29,010 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 19:15:29,012 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 19:15:29,012 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 19:15:29,012 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 19:15:29,013 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 19:15:29,013 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 19:15:29,019 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 19:15:29,049 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 19:15:30,698 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 19:15:41,552 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 19:15:41,714 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 19:15:41,714 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:41,715 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:41,715 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 19:15:41,715 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 19:15:41,724 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 19:15:41,724 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 19:15:41,725 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 19:15:41,727 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 19:15:41,727 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 19:15:41,728 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 19:15:41,733 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 19:15:41,891 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 19:15:41,894 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 19:15:41,895 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 19:15:41,899 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 19:15:41,905 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 19:15:41,905 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 19:15:41,908 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:41,909 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:41,912 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:41,912 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:41,916 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:41,916 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:41,926 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 19:15:41,926 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:41,926 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:41,935 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 19:15:41,945 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 19:15:41,987 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 19:15:41,987 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 19:15:41,988 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 19:15:41,988 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 19:15:41,988 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 19:15:41,989 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 19:15:41,989 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 19:15:42,117 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 19:15:42,118 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 19:15:42,119 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 19:15:42,119 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 19:15:42,171 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 19:15:42,173 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 19:15:42,173 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 19:15:42,174 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 19:15:42,182 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 19:15:42,203 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 19:15:42,203 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 19:15:42,207 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 19:15:42,208 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:42,208 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:42,212 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 19:15:42,212 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:42,212 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:42,213 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 19:15:42,219 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 19:15:42,219 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:42,219 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:42,223 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:42,223 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:42,226 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 19:15:42,226 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:42,226 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:42,229 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:42,229 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:42,235 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 19:15:42,235 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 19:15:42,236 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 19:15:45,320 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:15:45,320 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:15:47,735 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_9B614m0KTb6D0XA51a3cc0b
2025-06-24 19:15:49,747 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Stripe Payment Link generated for Invoice #1.
2025-06-24 19:42:50,813 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 19:42:50,813 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 19:42:50,813 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 19:42:50,813 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 19:42:50,813 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 19:42:50,813 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 19:42:50,825 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 19:42:50,825 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 19:42:50,857 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 19:42:50,857 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 19:42:50,858 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 19:42:51,047 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 19:42:51,049 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 19:42:51,049 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 19:42:51,049 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 19:42:51,050 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 19:42:51,050 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 19:42:51,063 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 19:42:51,098 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 19:42:52,722 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 19:43:01,547 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 19:43:01,711 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 19:43:01,711 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:01,712 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:01,712 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 19:43:01,712 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 19:43:01,722 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 19:43:01,727 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 19:43:01,728 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 19:43:01,728 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 19:43:01,729 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 19:43:01,729 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 19:43:01,740 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 19:43:02,963 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 19:43:02,966 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 19:43:02,968 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 19:43:02,973 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 19:43:02,978 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 19:43:02,978 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 19:43:02,982 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:02,982 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:02,985 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:02,986 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:02,991 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:02,991 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:03,007 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 19:43:03,007 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:03,008 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:03,016 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 19:43:03,028 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 19:43:03,069 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 19:43:03,070 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 19:43:03,071 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 19:43:03,071 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 19:43:03,071 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 19:43:03,072 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 19:43:03,072 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 19:43:03,201 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 19:43:03,202 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 19:43:03,202 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 19:43:03,203 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 19:43:03,261 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 19:43:03,262 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 19:43:03,262 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 19:43:03,263 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 19:43:03,271 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 19:43:03,294 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 19:43:03,294 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 19:43:03,298 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 19:43:03,298 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:03,299 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:03,302 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 19:43:03,302 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:03,302 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:03,303 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 19:43:03,309 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 19:43:03,309 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:03,309 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:03,313 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:03,313 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:03,317 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 19:43:03,317 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:03,317 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:03,320 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:03,321 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:03,326 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 19:43:03,326 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 19:43:03,327 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 19:43:07,659 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:07,659 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:12,533 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:12,534 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:12,534 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 19:43:13,550 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_dRmfZgdxFfmTcGialu3cc0c
2025-06-24 19:43:13,550 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-24 19:43:13,553 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:13,554 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:13,556 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:13,556 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:13,557 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:43:13,557 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:43:13,578 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 19:43:13,615 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 19:44:20,808 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:44:20,808 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:44:20,810 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 19:44:21,773 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_8x29ASeBJcaHeOq9hq3cc0d
2025-06-24 19:44:21,773 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-24 19:44:21,776 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:44:21,776 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:44:21,777 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:44:21,777 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:44:21,778 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:44:21,779 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:44:21,783 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 19:44:21,793 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 19:46:18,084 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 19:46:19,155 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_28EcN465ddeL7lYbpy3cc0e
2025-06-24 19:46:19,156 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-24 19:46:35,729 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:46:35,729 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:46:35,731 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:46:35,731 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:46:35,732 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:46:35,732 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:46:35,737 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices/Invoice-1.pdf
2025-06-24 19:46:35,737 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Success - Invoice successfully saved to:
C:/Projects/EDMS/Invoices/Invoice-1.pdf
2025-06-24 19:52:06,201 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-24 19:52:06,201 - INFO - EDSIApplication - main:365 - Main application screen (Horse Management) is closing.
2025-06-24 19:52:06,202 - INFO - EDSIApplication - main:367 - Main screen closed by user; initiating application quit.
2025-06-24 19:52:06,203 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-24 19:52:06,212 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-24 19:52:06,215 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-24 19:52:06,216 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-24 19:57:31,927 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 19:57:31,928 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 19:57:31,928 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 19:57:31,928 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 19:57:31,928 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 19:57:31,928 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 19:57:31,934 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 19:57:31,934 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 19:57:31,937 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 19:57:31,938 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 19:57:31,938 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 19:57:32,120 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 19:57:32,123 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 19:57:32,123 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 19:57:32,123 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 19:57:32,123 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 19:57:32,123 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 19:57:32,129 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 19:57:32,160 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 19:57:33,867 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 19:57:44,087 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 19:57:44,246 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 19:57:44,247 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,248 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,248 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 19:57:44,248 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 19:57:44,258 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 19:57:44,258 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 19:57:44,259 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 19:57:44,261 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 19:57:44,261 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 19:57:44,262 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 19:57:44,267 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 19:57:44,424 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 19:57:44,427 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 19:57:44,428 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 19:57:44,432 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 19:57:44,438 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 19:57:44,439 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 19:57:44,442 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,442 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,446 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,446 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,449 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,450 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,460 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 19:57:44,460 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,460 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,469 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 19:57:44,480 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 19:57:44,521 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 19:57:44,522 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 19:57:44,522 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 19:57:44,523 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 19:57:44,523 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 19:57:44,523 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 19:57:44,523 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 19:57:44,653 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 19:57:44,654 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 19:57:44,655 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 19:57:44,655 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 19:57:44,711 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 19:57:44,712 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 19:57:44,712 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 19:57:44,713 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 19:57:44,722 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 19:57:44,751 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 19:57:44,751 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 19:57:44,755 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 19:57:44,755 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,756 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,758 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 19:57:44,759 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,759 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,759 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 19:57:44,766 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 19:57:44,766 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,766 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,769 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,770 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,773 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 19:57:44,774 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,774 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,777 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:44,777 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:44,783 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 19:57:44,784 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 19:57:44,784 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 19:57:47,666 - INFO - EDSIApplication - main:305 - Setup icon clicked, attempting to show User Management Screen.
2025-06-24 19:57:47,667 - INFO - EDSIApplication - main:331 - Creating new User Management Screen instance.
2025-06-24 19:57:47,667 - INFO - UserManagementScreen - user_management_screen:116 - UserManagementScreen __init__ called for user: ADMIN
2025-06-24 19:57:47,668 - INFO - UserManagementScreen - base_view:75 - BaseView __init__ for UserManagementScreen started.
2025-06-24 19:57:47,668 - INFO - UserManagementScreen - base_view:79 - BaseView __init__ for UserManagementScreen: central_widget created.
2025-06-24 19:57:47,668 - INFO - UserManagementScreen - base_view:84 - BaseView __init__ for UserManagementScreen: Calling overridden setup_ui().
2025-06-24 19:57:47,669 - INFO - UserManagementScreen - user_management_screen:210 - Setting up UserManagementScreen UI...
2025-06-24 19:57:47,725 - INFO - UserManagementScreen - user_management_screen:634 - Loading users data for tab...
2025-06-24 19:57:47,727 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:47,728 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:47,728 - INFO - UserManagementScreen - user_management_screen:670 - Loaded 2 users.
2025-06-24 19:57:47,728 - INFO - UserManagementScreen - user_management_screen:258 - UserManagementScreen UI setup complete.
2025-06-24 19:57:47,876 - INFO - UserManagementScreen - base_view:182 - Dark theme palette and global styles applied for UserManagementScreen.
2025-06-24 19:57:47,877 - INFO - UserManagementScreen - base_view:115 - BaseView __init__ for UserManagementScreen: Default QStatusBar created and set.
2025-06-24 19:57:47,877 - INFO - UserManagementScreen - base_view:194 - Status update: Ready
2025-06-24 19:57:47,877 - INFO - UserManagementScreen - base_view:120 - BaseView __init__ for UserManagementScreen finished.
2025-06-24 19:57:47,878 - INFO - UserManagementScreen - user_management_screen:207 - UserManagementScreen __init__ completed.
2025-06-24 19:57:47,896 - INFO - EDSIApplication - main:344 - User Management Screen shown.
2025-06-24 19:57:52,271 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:52,272 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:58,744 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:57:58,744 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 19:57:58,749 - INFO - AddEditUserDialog - add_edit_user_dialog:103 - AddEditUserDialog initialized. Edit mode: True, Audit User: ADMIN
2025-06-24 19:58:10,633 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 6, new tab title: üè¢ Company Profile
2025-06-24 19:58:12,768 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 19:58:12,769 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:00:01,553 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 7, new tab title: üìÅ Application Paths
2025-06-24 20:00:08,205 - INFO - UserManagementScreen - user_management_screen:517 - Tab changed to index: 8, new tab title: üíæ Backup / Restore
2025-06-24 20:00:16,097 - INFO - EDSIApplication - main:348 - User Management Screen was closed and its instance destroyed.
2025-06-24 20:00:20,278 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:00:20,283 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:00:25,184 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:00:25,184 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:00:25,185 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 20:00:26,214 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_14A3cueBJ5Mj8q22T23cc0f
2025-06-24 20:00:26,215 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-24 20:00:26,218 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:00:26,218 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:00:26,219 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:00:26,219 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:00:26,220 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:00:26,222 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:00:26,229 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 20:00:26,263 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 20:01:11,900 - INFO - HorseUnifiedManagement - horse_unified_management:1656 - handle_logout_request_from_menu: User 'ADMIN' logout.
2025-06-24 20:01:11,900 - INFO - EDSIApplication - main:357 - User 'ADMIN' logging out from Horse Management.
2025-06-24 20:01:11,901 - INFO - EDSIApplication - main:360 - Logout requested. Application will now exit.
2025-06-24 20:01:11,901 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-24 20:01:11,902 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-24 20:01:11,902 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-24 20:01:11,916 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-24 20:01:11,917 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-24 20:11:31,267 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 20:11:31,267 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 20:11:31,267 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 20:11:31,268 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 20:11:31,268 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 20:11:31,268 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 20:11:31,274 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 20:11:31,274 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 20:11:31,277 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 20:11:31,278 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 20:11:31,278 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 20:11:31,458 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 20:11:31,461 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 20:11:31,461 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 20:11:31,461 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 20:11:31,461 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 20:11:31,462 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 20:11:31,468 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 20:11:31,498 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 20:11:33,107 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 20:11:42,877 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 20:11:43,042 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 20:11:43,042 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,043 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,043 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 20:11:43,043 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 20:11:43,054 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 20:11:43,055 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 20:11:43,056 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 20:11:43,057 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 20:11:43,057 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 20:11:43,058 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 20:11:43,064 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 20:11:43,226 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 20:11:43,229 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 20:11:43,231 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 20:11:43,235 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 20:11:43,241 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 20:11:43,241 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 20:11:43,244 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,244 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,248 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,248 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,252 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,253 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,261 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:11:43,262 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,262 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,272 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 20:11:43,283 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 20:11:43,326 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 20:11:43,327 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 20:11:43,327 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 20:11:43,328 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 20:11:43,328 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 20:11:43,328 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 20:11:43,328 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 20:11:43,455 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 20:11:43,456 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 20:11:43,456 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 20:11:43,456 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 20:11:43,509 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 20:11:43,511 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 20:11:43,511 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 20:11:43,511 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 20:11:43,521 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 20:11:43,542 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 20:11:43,542 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 20:11:43,546 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 20:11:43,546 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,546 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,549 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:11:43,550 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,550 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,550 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 20:11:43,557 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 20:11:43,557 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,558 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,561 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,561 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,564 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 20:11:43,565 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,565 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,568 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:43,568 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:43,573 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 20:11:43,573 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 20:11:43,574 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 20:11:45,812 - INFO - EDSIApplication - main:305 - Setup icon clicked, attempting to show User Management Screen.
2025-06-24 20:11:45,812 - INFO - EDSIApplication - main:331 - Creating new User Management Screen instance.
2025-06-24 20:11:45,813 - INFO - UserManagementScreen - user_management_screen:123 - UserManagementScreen __init__ called for user: ADMIN
2025-06-24 20:11:45,813 - INFO - UserManagementScreen - base_view:75 - BaseView __init__ for UserManagementScreen started.
2025-06-24 20:11:45,814 - INFO - UserManagementScreen - base_view:79 - BaseView __init__ for UserManagementScreen: central_widget created.
2025-06-24 20:11:45,814 - INFO - UserManagementScreen - base_view:84 - BaseView __init__ for UserManagementScreen: Calling overridden setup_ui().
2025-06-24 20:11:45,814 - INFO - UserManagementScreen - user_management_screen:215 - Setting up UserManagementScreen UI...
2025-06-24 20:11:45,868 - INFO - UserManagementScreen - user_management_screen:639 - Loading users data for tab...
2025-06-24 20:11:45,871 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:11:45,871 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:11:45,872 - INFO - UserManagementScreen - user_management_screen:675 - Loaded 2 users.
2025-06-24 20:11:45,872 - INFO - UserManagementScreen - user_management_screen:261 - UserManagementScreen UI setup complete.
2025-06-24 20:11:46,024 - INFO - UserManagementScreen - base_view:182 - Dark theme palette and global styles applied for UserManagementScreen.
2025-06-24 20:11:46,024 - INFO - UserManagementScreen - base_view:115 - BaseView __init__ for UserManagementScreen: Default QStatusBar created and set.
2025-06-24 20:11:46,025 - INFO - UserManagementScreen - base_view:194 - Status update: Ready
2025-06-24 20:11:46,025 - INFO - UserManagementScreen - base_view:120 - BaseView __init__ for UserManagementScreen finished.
2025-06-24 20:11:46,025 - INFO - UserManagementScreen - user_management_screen:212 - UserManagementScreen __init__ completed.
2025-06-24 20:11:46,047 - INFO - EDSIApplication - main:344 - User Management Screen shown.
2025-06-24 20:11:55,445 - INFO - UserManagementScreen - user_management_screen:524 - Tab changed to index: 6, new tab title: üè¢ Company Profile
2025-06-24 20:12:32,035 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Settings Saved - Stripe API keys saved. Changes will take full effect after application restart.
2025-06-24 20:12:35,263 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Success - Doctor Stripe settings saved. Restart the application for full effect.
2025-06-24 20:22:05,268 - INFO - EDSIApplication - main:348 - User Management Screen was closed and its instance destroyed.
2025-06-24 20:22:08,086 - INFO - HorseUnifiedManagement - horse_unified_management:1656 - handle_logout_request_from_menu: User 'ADMIN' logout.
2025-06-24 20:22:08,087 - INFO - EDSIApplication - main:357 - User 'ADMIN' logging out from Horse Management.
2025-06-24 20:22:08,087 - INFO - EDSIApplication - main:360 - Logout requested. Application will now exit.
2025-06-24 20:22:08,087 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-24 20:22:08,088 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-24 20:22:08,088 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-24 20:22:08,099 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-24 20:22:08,100 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-24 20:22:16,656 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 20:22:16,656 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 20:22:16,656 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 20:22:16,656 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 20:22:16,656 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 20:22:16,657 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 20:22:16,661 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 20:22:16,662 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 20:22:16,666 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 20:22:16,666 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 20:22:16,666 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 20:22:16,847 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 20:22:16,849 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 20:22:16,849 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 20:22:16,850 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 20:22:16,850 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 20:22:16,851 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 20:22:16,857 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 20:22:16,892 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 20:22:32,825 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 20:22:42,486 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 20:22:42,646 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 20:22:42,646 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:42,647 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:42,647 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 20:22:42,648 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 20:22:42,656 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 20:22:42,656 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 20:22:42,656 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 20:22:42,657 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 20:22:42,660 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 20:22:42,661 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 20:22:42,666 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 20:22:42,815 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 20:22:42,818 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 20:22:42,820 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 20:22:42,824 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 20:22:42,829 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 20:22:42,830 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 20:22:42,833 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:42,833 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:42,836 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:42,837 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:42,840 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:42,840 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:42,850 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:22:42,850 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:42,850 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:42,858 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 20:22:42,869 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 20:22:42,908 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 20:22:42,910 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 20:22:42,910 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 20:22:42,910 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 20:22:42,910 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 20:22:42,911 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 20:22:42,911 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 20:22:43,034 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 20:22:43,034 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 20:22:43,035 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 20:22:43,035 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 20:22:43,084 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 20:22:43,084 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 20:22:43,084 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 20:22:43,084 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 20:22:43,095 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 20:22:43,116 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 20:22:43,117 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 20:22:43,121 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 20:22:43,121 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:43,121 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:43,124 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:22:43,125 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:43,126 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:43,126 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 20:22:43,132 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 20:22:43,133 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:43,133 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:43,137 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:43,137 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:43,140 - INFO - FinancialController - financial_controller:503 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 20:22:43,140 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:43,141 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:43,144 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:43,144 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:43,150 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 20:22:43,150 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 20:22:43,150 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 20:22:47,983 - INFO - EDSIApplication - main:305 - Setup icon clicked, attempting to show User Management Screen.
2025-06-24 20:22:47,984 - INFO - EDSIApplication - main:331 - Creating new User Management Screen instance.
2025-06-24 20:22:47,985 - INFO - UserManagementScreen - user_management_screen:123 - UserManagementScreen __init__ called for user: ADMIN
2025-06-24 20:22:47,985 - INFO - UserManagementScreen - base_view:75 - BaseView __init__ for UserManagementScreen started.
2025-06-24 20:22:47,985 - INFO - UserManagementScreen - base_view:79 - BaseView __init__ for UserManagementScreen: central_widget created.
2025-06-24 20:22:47,985 - INFO - UserManagementScreen - base_view:84 - BaseView __init__ for UserManagementScreen: Calling overridden setup_ui().
2025-06-24 20:22:47,986 - INFO - UserManagementScreen - user_management_screen:215 - Setting up UserManagementScreen UI...
2025-06-24 20:22:48,040 - INFO - UserManagementScreen - user_management_screen:639 - Loading users data for tab...
2025-06-24 20:22:48,043 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:22:48,043 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:22:48,044 - INFO - UserManagementScreen - user_management_screen:675 - Loaded 2 users.
2025-06-24 20:22:48,044 - INFO - UserManagementScreen - user_management_screen:261 - UserManagementScreen UI setup complete.
2025-06-24 20:22:48,186 - INFO - UserManagementScreen - base_view:182 - Dark theme palette and global styles applied for UserManagementScreen.
2025-06-24 20:22:48,187 - INFO - UserManagementScreen - base_view:115 - BaseView __init__ for UserManagementScreen: Default QStatusBar created and set.
2025-06-24 20:22:48,187 - INFO - UserManagementScreen - base_view:194 - Status update: Ready
2025-06-24 20:22:48,187 - INFO - UserManagementScreen - base_view:120 - BaseView __init__ for UserManagementScreen finished.
2025-06-24 20:22:48,188 - INFO - UserManagementScreen - user_management_screen:212 - UserManagementScreen __init__ completed.
2025-06-24 20:22:48,205 - INFO - EDSIApplication - main:344 - User Management Screen shown.
2025-06-24 20:22:53,175 - INFO - UserManagementScreen - user_management_screen:524 - Tab changed to index: 6, new tab title: üè¢ Company Profile
2025-06-24 20:23:55,468 - INFO - EDSIApplication - main:348 - User Management Screen was closed and its instance destroyed.
2025-06-24 20:23:59,826 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:23:59,827 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:04,911 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:24:04,912 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:04,913 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 20:24:05,871 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_4gMfZg5194If49M0KU3cc0g
2025-06-24 20:24:05,872 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-24 20:24:05,875 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:24:05,876 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:05,876 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:24:05,877 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:05,878 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:24:05,878 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:05,886 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 20:24:05,924 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 20:24:51,001 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:24:51,001 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:51,003 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 20:24:52,264 - INFO - FinancialController - financial_controller:130 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_6oU9ASbpx8YvbCectC3cc0h
2025-06-24 20:24:52,264 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-24 20:24:52,266 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:24:52,267 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:52,268 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:24:52,268 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:52,269 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:24:52,269 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:24:52,274 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 20:24:52,285 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 20:32:37,823 - INFO - HorseUnifiedManagement - horse_unified_management:1656 - handle_logout_request_from_menu: User 'ADMIN' logout.
2025-06-24 20:32:37,823 - INFO - EDSIApplication - main:357 - User 'ADMIN' logging out from Horse Management.
2025-06-24 20:32:37,824 - INFO - EDSIApplication - main:360 - Logout requested. Application will now exit.
2025-06-24 20:32:37,824 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-24 20:32:37,825 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-24 20:32:37,825 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-24 20:32:37,839 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-24 20:32:37,839 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-24 20:41:34,813 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 20:41:34,813 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 20:41:34,813 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 20:41:34,813 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 20:41:34,814 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 20:41:34,814 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 20:41:34,820 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 20:41:34,820 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 20:41:34,822 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 20:41:34,823 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 20:41:34,823 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 20:41:35,006 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 20:41:35,008 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 20:41:35,008 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 20:41:35,009 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 20:41:35,009 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 20:41:35,009 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 20:41:35,016 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 20:41:35,056 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 20:41:36,911 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 20:41:57,805 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 20:41:57,968 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 20:41:57,968 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:57,970 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:57,970 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 20:41:57,970 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 20:41:57,979 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 20:41:57,979 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 20:41:57,979 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 20:41:57,980 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 20:41:57,980 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 20:41:57,980 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 20:41:57,987 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 20:41:58,147 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 20:41:58,150 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 20:41:58,152 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 20:41:58,156 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 20:41:58,161 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 20:41:58,161 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 20:41:58,164 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,164 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,168 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,169 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,173 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,173 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,182 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:41:58,183 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,183 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,192 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 20:41:58,203 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 20:41:58,244 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 20:41:58,245 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 20:41:58,245 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 20:41:58,246 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 20:41:58,246 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 20:41:58,246 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 20:41:58,247 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 20:41:58,374 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 20:41:58,375 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 20:41:58,375 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 20:41:58,375 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 20:41:58,428 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 20:41:58,428 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 20:41:58,429 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 20:41:58,429 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 20:41:58,439 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 20:41:58,459 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 20:41:58,460 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 20:41:58,465 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 20:41:58,465 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,466 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,469 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:41:58,469 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,469 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,470 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 20:41:58,477 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 20:41:58,478 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,478 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,481 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,481 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,485 - INFO - FinancialController - financial_controller:496 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 20:41:58,485 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,485 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,488 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:41:58,488 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:41:58,494 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 20:41:58,494 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 20:41:58,495 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 20:42:01,522 - INFO - EDSIApplication - main:305 - Setup icon clicked, attempting to show User Management Screen.
2025-06-24 20:42:01,522 - INFO - EDSIApplication - main:331 - Creating new User Management Screen instance.
2025-06-24 20:42:01,523 - INFO - UserManagementScreen - user_management_screen:123 - UserManagementScreen __init__ called for user: ADMIN
2025-06-24 20:42:01,524 - INFO - UserManagementScreen - base_view:75 - BaseView __init__ for UserManagementScreen started.
2025-06-24 20:42:01,524 - INFO - UserManagementScreen - base_view:79 - BaseView __init__ for UserManagementScreen: central_widget created.
2025-06-24 20:42:01,524 - INFO - UserManagementScreen - base_view:84 - BaseView __init__ for UserManagementScreen: Calling overridden setup_ui().
2025-06-24 20:42:01,524 - INFO - UserManagementScreen - user_management_screen:215 - Setting up UserManagementScreen UI...
2025-06-24 20:42:01,578 - INFO - UserManagementScreen - user_management_screen:639 - Loading users data for tab...
2025-06-24 20:42:01,581 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:42:01,582 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:42:01,583 - INFO - UserManagementScreen - user_management_screen:675 - Loaded 2 users.
2025-06-24 20:42:01,583 - INFO - UserManagementScreen - user_management_screen:261 - UserManagementScreen UI setup complete.
2025-06-24 20:42:01,732 - INFO - UserManagementScreen - base_view:182 - Dark theme palette and global styles applied for UserManagementScreen.
2025-06-24 20:42:01,733 - INFO - UserManagementScreen - base_view:115 - BaseView __init__ for UserManagementScreen: Default QStatusBar created and set.
2025-06-24 20:42:01,733 - INFO - UserManagementScreen - base_view:194 - Status update: Ready
2025-06-24 20:42:01,733 - INFO - UserManagementScreen - base_view:120 - BaseView __init__ for UserManagementScreen finished.
2025-06-24 20:42:01,733 - INFO - UserManagementScreen - user_management_screen:212 - UserManagementScreen __init__ completed.
2025-06-24 20:42:01,755 - INFO - EDSIApplication - main:344 - User Management Screen shown.
2025-06-24 20:42:06,302 - INFO - UserManagementScreen - user_management_screen:524 - Tab changed to index: 6, new tab title: üè¢ Company Profile
2025-06-24 20:42:11,543 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Settings Saved - Stripe API keys saved. Changes will take full effect after application restart.
2025-06-24 20:42:13,947 - INFO - UserManagementScreen - base_view:201 - Displaying Info: Success - Doctor Stripe settings saved. Restart the application for full effect.
2025-06-24 20:42:17,622 - INFO - EDSIApplication - main:348 - User Management Screen was closed and its instance destroyed.
2025-06-24 20:42:36,494 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:42:36,494 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:42:38,292 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:42:38,292 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:42:38,293 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 20:42:38,600 - ERROR - FinancialController - financial_controller:150 - Network or API communication error creating payment link for Invoice 1: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link
Traceback (most recent call last):
  File "C:\Projects\EDMS\controllers\financial_controller.py", line 126, in create_stripe_payment_link
    response.raise_for_status()
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link
2025-06-24 20:42:38,609 - WARNING - HorseUnifiedManagement - base_view:220 - Displaying Warning: Payment Link Generation Failed - Could not generate payment link for Invoice #1: Network/API communication error: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link. PDF will be generated without link.
2025-06-24 20:43:08,550 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:43:08,550 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:43:08,552 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:43:08,552 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:43:08,553 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:43:08,554 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:43:08,561 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 20:43:08,596 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 20:48:10,006 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 20:48:10,006 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 20:48:10,007 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 20:48:10,007 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 20:48:10,007 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 20:48:10,007 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 20:48:10,012 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 20:48:10,012 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 20:48:10,016 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 20:48:10,016 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 20:48:10,017 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 20:48:10,196 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 20:48:10,198 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 20:48:10,198 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 20:48:10,198 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 20:48:10,199 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 20:48:10,199 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 20:48:10,204 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 20:48:10,240 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 20:48:12,301 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 20:48:22,277 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 20:48:22,441 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 20:48:22,442 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,443 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,443 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 20:48:22,443 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 20:48:22,454 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 20:48:22,454 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 20:48:22,454 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 20:48:22,455 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 20:48:22,455 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 20:48:22,456 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 20:48:22,461 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 20:48:22,617 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 20:48:22,620 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 20:48:22,622 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 20:48:22,625 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 20:48:22,631 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 20:48:22,631 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 20:48:22,634 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,634 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,638 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,638 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,642 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,642 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,651 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:48:22,652 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,652 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,660 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 20:48:22,671 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 20:48:22,716 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 20:48:22,716 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 20:48:22,716 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 20:48:22,717 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 20:48:22,717 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 20:48:22,717 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 20:48:22,717 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 20:48:22,841 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 20:48:22,842 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 20:48:22,842 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 20:48:22,843 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 20:48:22,894 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 20:48:22,895 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 20:48:22,895 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 20:48:22,895 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 20:48:22,908 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 20:48:22,929 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 20:48:22,929 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 20:48:22,933 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 20:48:22,933 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,933 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,936 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:48:22,937 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,937 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,937 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 20:48:22,944 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 20:48:22,944 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,945 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,948 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,948 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,951 - INFO - FinancialController - financial_controller:496 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 20:48:22,951 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,952 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,954 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:22,954 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:22,960 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 20:48:22,960 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 20:48:22,960 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 20:48:51,873 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:51,876 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:53,218 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:48:53,219 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:48:53,221 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 20:48:53,423 - ERROR - FinancialController - financial_controller:150 - Network or API communication error creating payment link for Invoice 1: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link
Traceback (most recent call last):
  File "C:\Projects\EDMS\controllers\financial_controller.py", line 126, in create_stripe_payment_link
    response.raise_for_status()
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link
2025-06-24 20:48:53,424 - WARNING - HorseUnifiedManagement - base_view:220 - Displaying Warning: Payment Link Generation Failed - Could not generate payment link for Invoice #1: Network/API communication error: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link. PDF will be generated without link.
2025-06-24 20:49:27,112 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 20:49:27,112 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 20:49:27,112 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 20:49:27,113 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 20:49:27,113 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 20:49:27,113 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 20:49:27,119 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 20:49:27,119 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 20:49:27,122 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 20:49:27,123 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 20:49:27,123 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 20:49:27,304 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 20:49:27,305 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 20:49:27,306 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 20:49:27,306 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 20:49:27,306 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 20:49:27,307 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 20:49:27,312 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 20:49:27,343 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 20:49:28,931 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 20:49:43,354 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 20:49:43,516 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 20:49:43,516 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:43,518 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:43,518 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 20:49:43,518 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 20:49:43,527 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 20:49:43,528 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 20:49:43,529 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 20:49:43,530 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 20:49:43,530 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 20:49:43,530 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 20:49:43,535 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 20:49:43,699 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 20:49:43,702 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 20:49:43,703 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 20:49:43,707 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 20:49:43,713 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 20:49:43,713 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 20:49:43,716 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:43,716 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:43,719 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:43,720 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:43,724 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:43,724 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:43,733 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:49:43,734 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:43,734 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:43,743 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 20:49:43,752 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 20:49:43,794 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 20:49:43,795 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 20:49:43,795 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 20:49:43,795 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 20:49:43,796 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 20:49:43,796 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 20:49:43,796 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 20:49:43,922 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 20:49:43,923 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 20:49:43,923 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 20:49:43,923 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 20:49:43,973 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 20:49:43,975 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 20:49:43,975 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 20:49:43,975 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 20:49:43,984 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 20:49:44,006 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 20:49:44,007 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 20:49:44,010 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 20:49:44,011 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:44,011 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:44,014 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 20:49:44,014 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:44,015 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:44,015 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 20:49:44,023 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 20:49:44,023 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:44,024 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:44,027 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:44,027 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:44,030 - INFO - FinancialController - financial_controller:496 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 20:49:44,031 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:44,031 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:44,034 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:44,034 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:44,040 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 20:49:44,040 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 20:49:44,040 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 20:49:48,629 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:48,629 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:49,983 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:49:49,984 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:49:49,985 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 20:49:50,131 - ERROR - FinancialController - financial_controller:150 - Network or API communication error creating payment link for Invoice 1: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link
Traceback (most recent call last):
  File "C:\Projects\EDMS\controllers\financial_controller.py", line 126, in create_stripe_payment_link
    response.raise_for_status()
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link
2025-06-24 20:49:50,133 - WARNING - HorseUnifiedManagement - base_view:220 - Displaying Warning: Payment Link Generation Failed - Could not generate payment link for Invoice #1: Network/API communication error: 404 Client Error: Not Found for url: https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app/create-payment-link. PDF will be generated without link.
2025-06-24 20:58:28,907 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:58:28,908 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:58:28,909 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:58:28,910 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:58:28,911 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 20:58:28,911 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 20:58:28,918 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 20:58:28,953 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 20:58:40,632 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-24 20:58:40,633 - INFO - EDSIApplication - main:365 - Main application screen (Horse Management) is closing.
2025-06-24 20:58:40,634 - INFO - EDSIApplication - main:367 - Main screen closed by user; initiating application quit.
2025-06-24 20:58:40,634 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-24 20:58:40,643 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-24 20:58:40,646 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-24 20:58:40,647 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-24 21:03:14,244 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-24 21:03:14,244 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-24 21:03:14,244 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-24 21:03:14,244 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-24 21:03:14,244 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-24 21:03:14,245 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-24 21:03:14,251 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-24 21:03:14,251 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-24 21:03:14,254 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-24 21:03:14,255 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-24 21:03:14,255 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-24 21:03:14,436 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-24 21:03:14,438 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-24 21:03:14,438 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-24 21:03:14,438 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-24 21:03:14,438 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-24 21:03:14,439 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-24 21:03:14,444 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-24 21:03:14,476 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-24 21:03:16,248 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-24 21:03:25,879 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-24 21:03:26,041 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-24 21:03:26,042 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,042 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,043 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-24 21:03:26,043 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-24 21:03:26,054 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-24 21:03:26,056 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-24 21:03:26,058 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-24 21:03:26,058 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-24 21:03:26,058 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-24 21:03:26,059 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-24 21:03:26,064 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-24 21:03:26,226 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-24 21:03:26,230 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-24 21:03:26,231 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-24 21:03:26,235 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-24 21:03:26,241 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-24 21:03:26,241 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-24 21:03:26,245 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,245 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,249 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,250 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,254 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,254 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,263 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 21:03:26,263 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,264 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,274 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-24 21:03:26,285 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-24 21:03:26,328 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-24 21:03:26,329 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-24 21:03:26,329 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-24 21:03:26,329 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-24 21:03:26,330 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-24 21:03:26,330 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-24 21:03:26,330 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-24 21:03:26,454 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-24 21:03:26,455 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-24 21:03:26,455 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-24 21:03:26,455 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-24 21:03:26,510 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-24 21:03:26,512 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-24 21:03:26,512 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-24 21:03:26,512 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-24 21:03:26,525 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-24 21:03:26,558 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-24 21:03:26,558 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-24 21:03:26,562 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-24 21:03:26,563 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,563 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,566 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-24 21:03:26,566 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,566 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,567 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-24 21:03:26,575 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-24 21:03:26,575 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,575 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,579 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,579 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,582 - INFO - FinancialController - financial_controller:496 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-24 21:03:26,583 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,583 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,586 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:26,586 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:26,592 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-24 21:03:26,592 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-24 21:03:26,592 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-24 21:03:29,844 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:29,844 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:31,075 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:31,075 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:31,076 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-24 21:03:32,223 - INFO - FinancialController - financial_controller:131 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_9B614m79ha2z8q2dxG3cc0i
2025-06-24 21:03:32,223 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-24 21:03:32,226 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:32,227 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:32,228 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:32,228 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:32,229 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-24 21:03:32,229 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-24 21:03:32,237 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-24 21:03:32,271 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-24 21:04:36,844 - INFO - HorseUnifiedManagement - horse_unified_management:1656 - handle_logout_request_from_menu: User 'ADMIN' logout.
2025-06-24 21:04:36,845 - INFO - EDSIApplication - main:357 - User 'ADMIN' logging out from Horse Management.
2025-06-24 21:04:36,846 - INFO - EDSIApplication - main:360 - Logout requested. Application will now exit.
2025-06-24 21:04:36,846 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-24 21:04:36,846 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-24 21:04:36,847 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-24 21:04:36,859 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-24 21:04:36,859 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-25 12:42:59,525 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-25 12:42:59,526 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-25 12:42:59,526 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-25 12:42:59,526 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-25 12:42:59,526 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-25 12:42:59,526 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-25 12:42:59,539 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-25 12:42:59,539 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-25 12:42:59,569 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-25 12:42:59,570 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-25 12:42:59,570 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-25 12:42:59,760 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-25 12:42:59,762 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-25 12:42:59,762 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-25 12:42:59,762 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-25 12:42:59,762 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-25 12:42:59,763 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-25 12:42:59,776 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-25 12:42:59,814 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-25 12:43:01,893 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-25 12:43:12,612 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-25 12:43:12,773 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-25 12:43:12,773 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:12,775 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:12,775 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-25 12:43:12,775 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-25 12:43:12,786 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-25 12:43:12,786 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-25 12:43:12,787 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-25 12:43:12,787 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-25 12:43:12,788 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-25 12:43:12,790 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-25 12:43:12,802 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-25 12:43:12,958 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-25 12:43:12,961 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-25 12:43:12,963 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-25 12:43:12,967 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-25 12:43:12,973 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-25 12:43:12,973 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-25 12:43:12,976 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:12,976 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:12,980 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:12,980 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:12,984 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:12,984 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:13,001 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-25 12:43:13,001 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:13,003 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:13,011 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-25 12:43:13,022 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-25 12:43:13,066 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-25 12:43:13,066 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-25 12:43:13,067 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-25 12:43:13,067 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-25 12:43:13,067 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-25 12:43:13,067 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-25 12:43:13,067 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-25 12:43:13,193 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-25 12:43:13,195 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-25 12:43:13,195 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-25 12:43:13,195 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-25 12:43:13,247 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-25 12:43:13,249 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-25 12:43:13,249 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-25 12:43:13,249 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-25 12:43:13,256 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-25 12:43:13,274 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-25 12:43:13,275 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-25 12:43:13,278 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-25 12:43:13,278 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:13,280 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:13,283 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-25 12:43:13,283 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:13,284 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:13,285 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-25 12:43:13,291 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-25 12:43:13,292 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:13,292 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:13,296 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:13,296 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:13,300 - INFO - FinancialController - financial_controller:496 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-25 12:43:13,300 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:13,300 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:13,303 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:13,303 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:13,309 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-25 12:43:13,309 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-25 12:43:13,310 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-25 12:43:17,315 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:17,315 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:25,461 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:25,462 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:25,463 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-25 12:43:26,538 - INFO - FinancialController - financial_controller:131 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_5kQ14m0KTfmTbCectC3cc0j
2025-06-25 12:43:26,539 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-25 12:43:26,542 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:26,543 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:26,544 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:26,544 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:26,545 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:43:26,546 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:43:26,582 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-25 12:43:26,620 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-25 12:46:10,713 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Checking payment status for 1 unpaid invoices...
2025-06-25 12:46:11,013 - INFO - FinancialController - financial_controller:185 - Received payment status for Invoice 1 (Doctor ADMIN): Paid
2025-06-25 12:46:11,014 - INFO - InvoiceHistoryTab - invoice_history_tab:535 - Invoice #1 confirmed paid by backend. Updating local DB.
2025-06-25 12:46:11,023 - CRITICAL - GlobalExceptionHook - main:74 - Unhandled exception: NameError: name 'datetime' is not defined
Traceback (most recent call last):
  File "C:\Projects\EDMS\views\horse\tabs\invoice_history_tab.py", line 543, in _sync_payment_statuses
    "payment_date": datetime.now().date(),  # Use current date as confirmation date
                    ^^^^^^^^
NameError: name 'datetime' is not defined
Traceback (most recent call last):
  File "C:\Projects\EDMS\views\horse\tabs\invoice_history_tab.py", line 543, in _sync_payment_statuses
    "payment_date": datetime.now().date(),  # Use current date as confirmation date
                    ^^^^^^^^
NameError: name 'datetime' is not defined
2025-06-25 12:46:35,240 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:46:35,240 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:52:49,507 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-25 12:52:49,507 - INFO - EDSIApplication - main:365 - Main application screen (Horse Management) is closing.
2025-06-25 12:52:49,508 - INFO - EDSIApplication - main:367 - Main screen closed by user; initiating application quit.
2025-06-25 12:52:49,508 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-25 12:52:49,519 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-25 12:52:49,522 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-25 12:52:49,524 - INFO - __main__ - main:506 - Application exiting with code 0
2025-06-25 12:53:43,890 - INFO - EDSIApplication - main:185 - Logging configured (Console and File)
2025-06-25 12:53:43,890 - INFO - EDSIApplication - main:123 - Starting EDSI Veterinary Management System v2.0.3
2025-06-25 12:53:43,891 - INFO - EDSIApplication - main:124 - Python version: 3.11.4 (tags/v3.11.4:d2340ef, Jun  7 2023, 05:45:37) [MSC v.1934 64 bit (AMD64)]
2025-06-25 12:53:43,891 - INFO - EDSIApplication - main:125 - PySide6 version: 2.0.3
2025-06-25 12:53:43,891 - INFO - EDSIApplication - main:197 - Initializing database...
2025-06-25 12:53:43,891 - INFO - DatabaseManager - database_config:75 - Initializing database: sqlite:///C:/Projects/EDMS/edsi_database.db
2025-06-25 12:53:43,897 - INFO - DatabaseManager - database_config:88 - Database engine and session factory created
2025-06-25 12:53:43,897 - INFO - DatabaseManager - database_config:119 - Creating database tables...
2025-06-25 12:53:43,900 - INFO - DatabaseManager - database_config:123 - Database tables created/verified: ['roles', 'user_roles', 'users', 'horse_owners', 'horse_locations', 'horses', 'owners', 'owner_billing_history', 'owner_payments', 'state_provinces', 'charge_code_categories', 'charge_codes', 'veterinarians', 'locations', 'procedures', 'drugs', 'treatment_logs', 'communication_logs', 'documents', 'reminders', 'appointments', 'transactions', 'invoices', 'company_profile']
2025-06-25 12:53:43,901 - INFO - DatabaseManager - database_config:187 - Database connection test successful
2025-06-25 12:53:43,901 - INFO - DatabaseManager - database_config:205 - Ensuring default ADMIN user exists with bcrypt password.
2025-06-25 12:53:44,079 - INFO - DatabaseManager - database_config:280 - ADMIN user credentials, status, and name are correct.
2025-06-25 12:53:44,081 - INFO - DatabaseManager - database_config:308 - Default ADMIN user ready (Username: ADMIN, Password: admin1234)
2025-06-25 12:53:44,082 - INFO - DatabaseManager - database_config:92 - Database initialization completed successfully
2025-06-25 12:53:44,082 - INFO - EDSIApplication - main:204 - Database initialized successfully
2025-06-25 12:53:44,082 - INFO - EDSIApplication - main:216 - Showing splash screen
2025-06-25 12:53:44,082 - INFO - SplashScreen - splash_screen:73 - Attempting to load splash image from: C:\Projects\EDMS\assets\splash_screen.jpg
2025-06-25 12:53:44,088 - INFO - SplashScreen - splash_screen:129 - Splash screen UI setup complete.
2025-06-25 12:53:44,121 - INFO - EDSIApplication - main:441 - Starting EDSI Veterinary Management System event loop
2025-06-25 12:53:46,479 - INFO - EDSIApplication - main:225 - Showing login dialog
2025-06-25 12:54:20,730 - INFO - UserController - user_controller:44 - UserController.authenticate_user received login_id: 'admin', password_attempt (first 3 chars): 'adm...'
2025-06-25 12:54:20,890 - INFO - UserController - user_controller:81 - User 'ADMIN' authenticated successfully.
2025-06-25 12:54:20,890 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:20,892 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:20,892 - INFO - SmallLoginDialog - small_login_dialog:226 - User 'ADMIN' logged in successfully
2025-06-25 12:54:20,892 - INFO - EDSIApplication - main:245 - User 'ADMIN' logged in successfully
2025-06-25 12:54:20,900 - INFO - EDSIApplication - main:286 - Showing Horse Management screen for user: ADMIN
2025-06-25 12:54:20,901 - INFO - HorseUnifiedManagement - horse_unified_management:117 - HorseUnifiedManagement __init__ started for user: ADMIN
2025-06-25 12:54:20,901 - INFO - HorseUnifiedManagement - base_view:75 - BaseView __init__ for HorseUnifiedManagement started.
2025-06-25 12:54:20,903 - INFO - HorseUnifiedManagement - base_view:79 - BaseView __init__ for HorseUnifiedManagement: central_widget created.
2025-06-25 12:54:20,903 - INFO - HorseUnifiedManagement - base_view:84 - BaseView __init__ for HorseUnifiedManagement: Calling overridden setup_ui().
2025-06-25 12:54:20,904 - INFO - HorseUnifiedManagement - horse_unified_management:179 - HorseUnifiedManagement.setup_ui: EXECUTION CONFIRMED.
2025-06-25 12:54:20,909 - INFO - HorseUnifiedManagement - horse_unified_management:856 - --- HORSEUNIFIEDMANAGEMENT.SETUP_HORSE_TABS START ---
2025-06-25 12:54:21,063 - INFO - HorseUnifiedManagement - horse_unified_management:868 - BasicInfoTab created.
2025-06-25 12:54:21,066 - INFO - HorseUnifiedManagement - horse_unified_management:876 - OwnersTab created.
2025-06-25 12:54:21,067 - INFO - HorseUnifiedManagement - horse_unified_management:884 - LocationTab created.
2025-06-25 12:54:21,071 - INFO - HorseUnifiedManagement - horse_unified_management:890 - BillingTab created.
2025-06-25 12:54:21,077 - INFO - HorseUnifiedManagement - horse_unified_management:896 - InvoiceHistoryTab created.
2025-06-25 12:54:21,077 - INFO - ReportsController - reports_controller:48 - ReportsController initialized.
2025-06-25 12:54:21,080 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,081 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,084 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,084 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,088 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,089 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,098 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-25 12:54:21,098 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,098 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,107 - INFO - HorseUnifiedManagement - horse_unified_management:901 - ReportsTab created.
2025-06-25 12:54:21,117 - INFO - HorseUnifiedManagement - horse_unified_management:904 - Tabs added.
2025-06-25 12:54:21,160 - INFO - HorseUnifiedManagement - horse_unified_management:1683 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS START ---
2025-06-25 12:54:21,161 - INFO - HorseUnifiedManagement - horse_unified_management:1707 - Connecting BasicInfoTab signals.
2025-06-25 12:54:21,161 - INFO - HorseUnifiedManagement - horse_unified_management:1723 - Connecting OwnersTab signals.
2025-06-25 12:54:21,162 - INFO - HorseUnifiedManagement - horse_unified_management:1731 - Connecting LocationTab signals.
2025-06-25 12:54:21,162 - INFO - HorseUnifiedManagement - horse_unified_management:1744 - Connecting InvoiceHistoryTab signals.
2025-06-25 12:54:21,162 - INFO - HorseUnifiedManagement - horse_unified_management:1758 - --- HORSEUNIFIEDMANAGEMENT.SETUP_CONNECTIONS END ---
2025-06-25 12:54:21,162 - INFO - HorseUnifiedManagement - horse_unified_management:194 - HorseUnifiedManagement.setup_ui: All components initialized.
2025-06-25 12:54:21,289 - INFO - HorseUnifiedManagement - base_view:182 - Dark theme palette and global styles applied for HorseUnifiedManagement.
2025-06-25 12:54:21,290 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Ready
2025-06-25 12:54:21,290 - INFO - HorseUnifiedManagement - base_view:120 - BaseView __init__ for HorseUnifiedManagement finished.
2025-06-25 12:54:21,291 - INFO - HorseUnifiedManagement - horse_unified_management:174 - HorseUnifiedManagement screen __init__ finished (initial data load deferred).
2025-06-25 12:54:21,344 - INFO - HorseUnifiedManagement - horse_unified_management:197 - HorseUnifiedManagement showEvent: START
2025-06-25 12:54:21,345 - INFO - HorseUnifiedManagement - base_view:194 - Status update: No horse selected. Add a new horse or select from list.
2025-06-25 12:54:21,346 - INFO - HorseUnifiedManagement - horse_unified_management:416 - display_empty_state: FINISHED
2025-06-25 12:54:21,346 - INFO - HorseUnifiedManagement - horse_unified_management:242 - HorseUnifiedManagement showEvent: FINISHED - screen should be visible.
2025-06-25 12:54:21,355 - INFO - EDSIApplication - main:301 - Horse Management Screen shown.
2025-06-25 12:54:21,373 - INFO - HorseUnifiedManagement - horse_unified_management:568 - load_initial_data: START - Attempting to load horses.
2025-06-25 12:54:21,374 - INFO - HorseUnifiedManagement - horse_unified_management:1363 - load_horses: Filter status: 'active', Search: ''
2025-06-25 12:54:21,377 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: active) found 1 results.
2025-06-25 12:54:21,377 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,378 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,382 - INFO - HorseController - horse_controller:301 - Search for horses (term: '', owner: 'None', status: all) found 1 results.
2025-06-25 12:54:21,382 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,383 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,383 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-25 12:54:21,389 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-25 12:54:21,390 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,390 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,393 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,393 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,397 - INFO - FinancialController - financial_controller:496 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-25 12:54:21,397 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,398 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,400 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:21,401 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:21,407 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-25 12:54:21,407 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-25 12:54:21,407 - INFO - HorseUnifiedManagement - horse_unified_management:571 - load_initial_data: FINISHED - load_horses call completed.
2025-06-25 12:54:28,604 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:28,604 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:30,166 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:30,167 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:30,168 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Generating payment link for Invoice #1...
2025-06-25 12:54:31,159 - INFO - FinancialController - financial_controller:131 - Backend API successfully created Payment Link for Invoice 1: https://buy.stripe.com/test_dRm14mfFN0rZeOqeBK3cc0k
2025-06-25 12:54:31,160 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Payment link generated for Invoice #1.
2025-06-25 12:54:31,163 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:31,163 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:31,164 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:31,164 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:31,165 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:54:31,166 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:54:31,173 - INFO - InvoiceGenerator - invoice_generator:168 - Successfully generated PDF for Invoice #1 at C:/Projects/EDMS/Invoices\Invoice-1 for Davis.pdf
2025-06-25 12:54:31,206 - INFO - HorseUnifiedManagement - base_view:201 - Displaying Info: Email Process Complete - Your email client should have opened with drafts for the selected invoices.

The invoice PDFs have been saved to the 'invoices' folder.

Please attach the correct file to each email before sending.
2025-06-25 12:56:26,666 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Checking payment status for 1 unpaid invoices...
2025-06-25 12:56:26,929 - INFO - FinancialController - financial_controller:185 - Received payment status for Invoice 1 (Doctor ADMIN): Paid
2025-06-25 12:56:26,929 - INFO - InvoiceHistoryTab - invoice_history_tab:532 - Invoice #1 confirmed paid by backend. Updating local DB.
2025-06-25 12:56:26,931 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:56:26,931 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:56:26,932 - INFO - FinancialController - financial_controller:450 - Invoice #1 marked as Paid.
2025-06-25 12:56:26,939 - INFO - FinancialController - financial_controller:466 - Payment of $69.00 successfully recorded for Invoice #1.
2025-06-25 12:56:26,939 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:56:26,940 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:56:26,940 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Invoice #1 marked as Paid in local DB.
2025-06-25 12:56:26,940 - INFO - HorseUnifiedManagement - horse_unified_management:1676 - Payment recorded signal received, refreshing all horse details.
2025-06-25 12:56:26,941 - INFO - HorseUnifiedManagement - horse_unified_management:1048 - load_horse_details: START for horse ID: 1
2025-06-25 12:56:26,944 - INFO - HorseController - horse_controller:247 - Retrieved horse ID 1: Daisy Mae
2025-06-25 12:56:26,944 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:56:26,944 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:56:26,946 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:56:26,946 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:56:26,947 - INFO - FinancialController - financial_controller:496 - Retrieved 0 ACTIVE transactions for horse ID 1.
2025-06-25 12:56:26,947 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:56:26,948 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:56:26,949 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:56:26,949 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:56:26,950 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Viewing: Daisy Mae
2025-06-25 12:56:26,950 - INFO - HorseUnifiedManagement - horse_unified_management:1075 - load_horse_details: FINISHED for horse ID: 1
2025-06-25 12:56:26,951 - INFO - HorseUnifiedManagement - base_view:194 - Status update: Sync complete. 1 invoice(s) marked as paid.
2025-06-25 12:56:26,951 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:56:26,953 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 12:56:43,752 - INFO - DatabaseManager - database_config:320 - Database sessions closed
2025-06-25 12:56:43,752 - INFO - DatabaseManager - database_config:323 - Database engine disposed
2025-06-25 13:46:44,101 - INFO - HorseUnifiedManagement - horse_unified_management:1656 - handle_logout_request_from_menu: User 'ADMIN' logout.
2025-06-25 13:46:44,102 - INFO - EDSIApplication - main:357 - User 'ADMIN' logging out from Horse Management.
2025-06-25 13:46:44,103 - INFO - EDSIApplication - main:360 - Logout requested. Application will now exit.
2025-06-25 13:46:44,104 - INFO - EDSIApplication - main:372 - Application quit requested.
2025-06-25 13:46:44,104 - WARNING - HorseUnifiedManagement - horse_unified_management:584 - HorseUnifiedManagement closeEvent. Type: 19
2025-06-25 13:46:44,104 - WARNING - HorseUnifiedManagement - horse_unified_management:587 - HorseUnifiedManagement finished processing closeEvent.
2025-06-25 13:46:44,118 - INFO - EDSIApplication - main:444 - Application finished with exit code: 0
2025-06-25 13:46:44,118 - INFO - __main__ - main:506 - Application exiting with code 0
